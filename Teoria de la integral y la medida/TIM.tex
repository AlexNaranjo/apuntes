\documentclass{apuntes}

\title{Teoría de la integral y la medida}
\author{Pedro Valero y Jorge Martín}
\date{14/15 C1}

% Paquetes adicionales
\usepackage{tikztools}
\usepackage{fastbuild}
\usepackage{graphicx}
\usetikzlibrary{arrows}
% --------------------
\begin{document}
\pagestyle{plain}
\maketitle


\tableofcontents
\newpage

\chapter{Sobre la asignatura}
\section{Evaluación}
Hay tres posibles itinerarios de evaluación:
\begin{itemize}
\item \textbf{A}: $\frac{1}{3}T_1+\frac{1}{3}EP+\frac{1}{3}T_2$
\item \textbf{B}: $\frac{2}{5}EP+ \frac{3}{5}EF$
\item \textbf{C}:$EF$
\end{itemize}
Donde $T_1$  y $T_2$ son ``trabajos" que habrá que entregar y se realizará un examen en las fechas indicadas. El ``trabajo" consistirá en la resolución y entrega individual de ciertos ejercicios y el examen se basará en esos ejercicios con algunas variaciones.

\section{Fechas de exámenes}
Las fechas de los exámenes/trabajos serán:
\begin{itemize}
\item $T_1$: 7-Oct
\item $T_2$: 17-Dic
\item $EP$: 10:14-Nov
\item $EF$: 12-Ene
\end{itemize}

\section{Bibliografía}
Durante el curso se seguirán dos libros fundamentalmente:
\begin{enumerate}
\item El libro de Folland: \textit{Real Analysis}
\item El libro de Taylor: \textit{Measure theory and integration} (Serivirá en algunos temas en concreto)
\end{enumerate}

\chapter{Repaso}
\begin{theorem}[Teorema fundamental del Cálculo]
Dada una función $f$ integrable sobre el intervalo [a,b], definimos $F$ sobre [a,b] por:
\[F(x)=\int_{a}^{x}f(t)dt\]
Si $f$ es continua en $c\in (a,b)$ entonces $F$ es derivable en C y $F'(c)=f(c)$
\end{theorem}

\section{Integral de Riemann}
La construcción de esta integral se realiza sobre un intervalo $[a,b]$, en $\mathbb{R}^2$ y basándonos en una función continua $y=f(x)$.

\begin{defn}[Partición]
Una partición $P$ de $[a,b]$ es una colección finita de subintervalos cerrados $I_i$=$[x_{i-1}, x_i]$ con $i=1,2,\dotsc,N$ tal que $a=x_0<x_1<\cdots < x_N=b$, con $\abs{I_i} = x_i-x_{i-1}$ y $\abs{P} = \max \lbrace \abs{I_i} \rbrace$
\end{defn}


Sea $f:[ a,b ] \rightarrow \mathbb{R}$ acotada definimos:
\begin{itemize}
\item \begin{defn}[Suma\IS superior]
$\overline{J}_p(f)=\sum_{i=1}^{N}\sup(f(x))|I_i|$
\end{defn}

\item \begin{defn}[Suma\IS inferior]
$\underline{J}_p(f)=\sum_{i=1}^{N}\inf(f(x))|I_i|$
\end{defn}
\end{itemize}

La suma inferior de Riemman será la correspondiente a tomar para cada intervalo $[x_{i-1}, x_i]$ la altura mínima de $f(x)$ y construir un rectángulo de dicha altura para posteriormente sumar las áreas de esos rectángulos

La suma superior de Riemann es equivalente a la inferior salvo que en cada intervalo $[x_{i-1}, x_i]$ tomamos la altura máxima de $f(x)$.

La suma superior nos dará un área mayor que el área real encerrada por la curva mientras que la suma inferior nos dará un área menor que la real.

\begin{defn}[Finura]
Dadas dos particiones $P,Q$ de $[a,b]$, $P$ es más fina que $Q$ ($Q\prec P$) si el conjunto de extremos de subintervalos de $Q$ está contenido en el conjunto de extremos de subintervalos de $P$.

Es decir, $P$ tiene más subintervalos que $Q$.
\end{defn}

Si $Q\prec P$ entonces $\overline{J}_P(f) \leq \overline{J}_Q(f)$ y $\underline{J}_Q(f) \leq \underline{J}_P(f)$.

Dadas dos particiones $P_1,P_2$ siempre es posible obtener una partición $P$ que refina a ambas. Esta partición será aquella que una todos los extremos de subintervalos de las dos particiones dadas.

Entonces $\underline{J}_{P_1(f)} \leq \underline{J}_P(f) \leq \overline{J}_P(f) \leq \overline{J}_{P_2}$. Es decir, cualquier suma inferior de la función $f$ es menor o igual que cualquier suma superior de dicha función

Por tanto podemos garantizar la existencia de un supremo de las sumas inferiores y un ínfimo de las sumas superiores que serán finitos. Obviamente este ínfimo será mayor que el supremo.

\begin{defn}[Función Integrable\IS Riemann]
Una función $\appl{f}{[a,b]}{\mathbb{R}}$ acotada es integrable Riemann ($f \in R([a,b])$) si el supremo y el ínfimo anteriores coinciden, en cuyo caso se escribe:
\[ J(f) = \int_a^b f = \underline{J}(f) = \overline{J}(f) = \int_a^b f(x) \dif x \]
\end{defn}

\subsection{Propiedades}
$f,g \in R([a,b]), \alpha \in \mathbb{R}$
\begin{enumerate}
\item La suma es integrable Riemann
\[f + g \in R([a,b])\]\[ J(f+g) = J(f) + J(g)\]
\item El producto por una constante es integrable Riemann
\[\alpha f \in R([a,b])\] \[ J(\alpha f) = \alpha J(g)\]
\item Si además $f\geq 0$ entonces $J(f)\geq 0$
\item $\forall c \in (a,b)$ $f\in R([a,c])$  y $f\in R([c,b])$ se cumple
$\int_a^b f = \int_a^c f + \int_c^b f$
\end{enumerate}

\begin{example} $ $

Veamos un ejemplo de función acotada en $[0,1]$ que NO ES integrable Riemann.
\[
 \ind_{\mathbb{Q}  \cap  [0,1]} (x) =
  \begin{cases}
   1 &  x \in \mathbb{Q} \cap [0,1] \\
   0       &  x \in [0,1] \backslash \mathbb{Q}
  \end{cases}
\]

Para comprobar que esta función no es integrable Riemann tenemos que ver que las sumas inferiores no coinciden con las superiores.
\[\forall P, \overline{J}_P(\ind_{\mathbb{Q} \cap [0,1]}) = 1\]
\[\forall P, \underline{J}_P(	\ind_{\mathbb{Q} \cap [0,1]}) = 0\]


\begin{proof}
La suma inferior da siempre 0 en este caso ya que en cualquier intervalo de la partición hay números irracionales. Por otro lado la suma superior da 1 ya que en todo intervalo hay racionales. Así el ínfimo de las sumas superiores es 1 mientras que el supremo de las sumas inferiores es 0.
\end{proof}
\end{example}

\subsection{Problema de la Integral de Riemann}
Existe una sucesión de funciones $f_n$, tales que $f_n\in R([ 0, 1 ])$, creciente y uniformemente acotada que converge a $f(x)$ tal que:
\[\lim \int_0^1 f_n(x) \dif x \neq \int_0^1 f(x) \dif x\]

\begin{example} $ $
%TODO completar esto en condiciones por que da pena.

Sea $E = \lbrace q_1, q_2, q_3, \cdots \rbrace$ una enumeración los racionales comprendidos entre 0 y 1.

Definimos $f_n(x)=
\begin{cases}
   1 &  x \in E \\
   0       &  x \in [0,1] \backslash E \rbrace
\end{cases}$

El límite de estas funciones sería $f(x)=
\begin{cases}
   1 &  x \in \mathbb{Q} \cap [0,1] \\
   0       &  x \in [0,1] \backslash \mathbb{Q}
\end{cases}$

Si calculamos las integrales de Riemann superior e inferior vemos que todas las funciones $f_n(x)$ son integrables Riemann pero no lo es $f(x)$, como ya vimos en el ejemplo anterior.
 Veamos como cada $f_n$ es integrable Riemann:
 %TODO Añadir etiqueta


Definimos $f_{q_n}(x) =
\begin{cases}
	1 & x = q_n\\
	0 & x \in [0,1] \backslash \{q_n\}
\end{cases}$

Tomando la partición
$P = \{ [0, q_n - \frac{\varepsilon}{2}], [q_n - \frac{\varepsilon}{2}, q_n + \frac{\varepsilon}{2}], [q_n + \frac{\varepsilon}{2}, 1] \}$

% Dibujo de la recta asociada a la partición
\inputtikz{recta-de-particion}

Podemos ver que $f_{q_n}$ es integrable Riemman, ya que:
\[ \overline{J}_P (f_{q_n}) =
\varepsilon \underset{\varepsilon \rightarrow 0}{\implies} \overline{J} (f_{q_n}) = 0 = \underline{J} (f_{q_n}) \]

Como $f_n = f_{q_1} + \ldots + f_{q_n}$, y toda $ f_{q_i}$ es integrable Riemann, por la propiedad 1 sabemos que $f_n$ será integrable Riemann.
\end{example}

\begin{defn}[Contenido]
A toda integral sobre un intervalo se puede asociar una forma de medir subconjuntos del intervalo.

En el caso de la integral de Riemann esa ``medida" suele llamarse contenido de Jordan.

Sea $C\subset$[a,b] se define:
\[\mop{cont}(C) = \int_a^b \ind_{C}(x) \dif x\]
siempre que $\ind_C \in R([a,b])$

En general, aunque $\ind_C \notin R([a,b])$ se puede hablar de contenido exterior y de contenido interior:
\[\mop{cont}^+(C)=\overline{J}(\ind_C)\]
\[\mop{cont}^-(C)=\underline{J}(\ind_C)\]

Suele decirse que un conjunto ``tiene contenido" cuando $\mop{cont}^+(C)=\mop{cont}^-(C)$
\end{defn}

El problema que abordaremos próximamente es que la unión numerable de conjuntos con contenido no siempre tiene contenido.

\obs $f\in R([a,b]) \Leftrightarrow \forall \epsilon \exists P \tq \overline{J}_P(f)-\underline{J}_P(f) < \epsilon$


\textbf{En moodle hay un resumen de este tema}

\begin{example}
\textbf{Ejercicio 1 de la hoja 1}

El objetivo del ejericio es demostrar que $f\in R([a,b]) \Rightarrow \abs{f}\in R([a,b])$

Para ellos definimos:
$f^+(x) = \max\lbrace f(x), 0 \rbrace$

$f(x) = f^+(x) - f^-(x)$

De donde podemos deducir:

$f^-(x) = f^+(x)-f(x)=\max \lbrace -f(x), 0 \rbrace$

Y las funciones tienen el siguiente aspecto:

\begin{center}
	% Función f
	\inputtikz{img1-ej1-h1}
	% Función f+
	\inputtikz{img2-ej1-h1}
	% Funcion f-
	\inputtikz{img3-ej1-h1}
\end{center}


Así podemos escribir \[ \abs{f(x)} = f^+(x)+f^-(x) \]

Gracias a esta afirmación el problema se reduce a demostrar que la parte positiva ($f^+$) es integrable Riemann, ya que entonces lo serán  y $f^-$  y $\abs{f(x)}$  por ser la suma/resta de dos funciones integrables Riemann.


Vamos a calcular $f^+(x)$:
\[\overline{J}_P(f^+)-\underline{J}_P(f^+) = \sum_{k=1}^n\left(\sup_{x\in I_k}(f^+(x))\right)\abs{I_k} - \sum_{k=1}^n\left(\inf_{x\in I_k}(f^+(x))\right)\abs{I_k}=\]
\[= \sum_{k=1}^n\left(\sup_{x\in I_k}(f^+(x))-\inf_{x\in I_k}(f^+(x))\right)\abs{I_k} \leq
\sum_{k=1}^n\left(\sup_{x\in I_k}(f(x))-\inf_{x\in I_k}(f(x))\right)\abs{I_k} =\] \[=\overline{J}_P(f)-\underline{J}_P(f) = 0\]

Y sabemos que $f$ es integrable
\end{example}

\begin{example}
\textbf{Ejercicio 2 hoja 1}

El ejercicio nos pide demostrar:
\[ f,g \in R([a,b]), h(x) = max\lbrace f(x), g(x) \rbrace \Rightarrow h \in R([a,b]) \]

Vamos a comprobar que la diferencia entre las integrales Riemann superior e inferior es 0.
Pero antes fijémonos en la \underline{indicación}:

\newpage
\[\sup\big\{ \max\{f(x), g(x)\}\big\} - \inf\big\{ \max\{f(x), g(x)\} \big\} \leq \]

\[ \leq \max\big\{ \sup_{x \in I_k} (f(x)) - \inf_{x \in I_k} (f(x)), \sup_{x \in I_k} (g(x)) - \inf_{x \in I_k} (g(x)) \big\} \leq \]

\[ \leq \left(\sup_{x \in I_k} (f(x)) - \inf_{x \in I_k} (f(x))\right) + \left(\sup_{x \in I_k} (g(x)) - \inf_{x \in I_k} (g(x))\right) \]


Ahora podemos probar que:
\[\overline{J}_P(h)-\underline{J}_P(h)
= \sum\left(\sup_{x\in I_k}(h(x))-\inf_{x\in I_k}(h(x))\right)\abs{I_k} \leq\]


\[\leq \sum\left( \sup_{x \in I_k} (f(x)) - \inf_{x \in I_k} (f(x)) \right) \abs{I_k} +
 \sum\left( \sup_{x \in I_k} (g(x)) - \inf_{x \in I_k} (g(x)) \right) \abs{I_k} \]

Sabiendo que $f$ y $g$ son integrables Riemann llegamos a:
\[\sum\left( \sup_{x \in I_k} (f(x)) - \inf_{x \in I_k} (f(x)) \right) \abs{I_k} +
 \sum\left( \sup_{x \in I_k} (g(x)) - \inf_{x \in I_k} (g(x)) \right) \abs{I_k} \leq 0 + 0 = 0\]

 Con lo que queda probado que $h(x) = \max\lbrace f(x), g(x) \rbrace$ es integrable Riemann

\end{example}

\chapter{Teoría de la medida}
Para resolver los problemas de la integral de Riemann va a aparecer la integral de Lebesgue pero para poder usarla correctamente necesitamos medir. Aquí nos surgen dos problemas: ¿Con qué quieres medir? y ¿Qué quieres medir?

Veamos un caso sencillo.
\begin{example}
Tomemos el intervalo [0,1) y supongamos que queremos medir un conjunto $A\subset [0,1)$. Esta medida debería cumplir algunas propiedades básicas. Por ejemplo:
\begin{itemize}
\item $0\leq m(A) \leq 1$
\item La medida de un intervalo deberá coincidir con su longitud $m(I)=\abs{I}$
\item Invariable por traslaciones $m(A+t) = m(A)$.
\item Dada una familia de conjuntos disjuntos $A_i\subset [0,1)$, $m(\cup_{1}^{\infty} A_i) = \sum_{1}^{\infty}m(A_i)$
\end{itemize}

¿Puedo asignar a cualquier $A~\subset~[0,1)~un~m(A)$? La respuesta es \textbf{No}

La forma de solucionar este problema consiste en dejar de querer medir todos los conjuntos posibles en el intervalo [0,1) y limitarnos a trabajar con aquellos conjuntos que si podemos medir.

Vamos a definir una relación de equivalencia en el intervalo [0,1): xRy $\Leftrightarrow$ x-y~$\in~\mathbb{Q}$. R divide a [0,1) en clases de equivalencia E=$\lbrace$ un elemento de cada clase $\rbrace$

\[E_q = \lbrace E\cap [0, 1-q) +q \rbrace \cup \lbrace E\cap (1-q, 1) + q - 1\rbrace\]
Si $q \neq q' \ q,q'\in \mathbb{Q} \Rightarrow E_q\cap E_{q'} = \emptyset$

Visto esto podemos escribir [0,1)=$\cup_{q\in \mathbb{Q}}E_q$. Es decir, escribimos el intervalo [0,1) como una unión infinita de conjuntos disjuntos y trasladados. Según las propiedades que hemos pedido para una medida necesitaríamos $1 = \sum m(E_q)$ siendo $m(E_q)$ igual $\forall q$  pero esto es imposible. Si $m(E_q) = 0$ la suma es 0. En caso contrario una suma infinita nos dará infinito.

Por tanto el intervalo [0,1) no podemos medirlo siguiendo este criterio

\end{example}

Podemos pensar que la cuarta propiedad que hemos pedido para la medida es demasiado. ¿Y si restringimos esa propiedad a uniones (y por tanto sumas) finitas?. Aún con esta simplificación de las condiciones no podríamos medir todo.

\begin{example}
Paradoja de Banach-Tarsky

La paradoja de Banach-Tarski es en realidad un teorema que afirma que es posible dividir una esfera (llena) de radio 1 en ocho partes disjuntas dos a dos, de modo que, aplicando movimientos oportunos a cinco de ellas, obtengamos nuevos conjuntos que constituyan una partición de una esfera (llena) de radio 1, y lo mismo ocurra con las tres partes restantes.

En palabras más sencillas, se supone que es posible fabricar un rompecabezas tridimensional de un total de ocho piezas, las cuales, combinadas de una determinada manera, formarían una esfera completa y rellena (sin agujeros) y, combinadas de otra manera, formarían dos esferas rellenas (sin agujeros) del mismo radio que la primera.

El teorema de Banach–Tarski recibe el nombre de paradoja por contradecir nuestra intuición geométrica básica. Las operaciones básicas que se realizan preservan el volumen siempre que los fragmentos sean medibles, pero precisamente las ocho partes citadas en el teorema son conjuntos no medibles. La construcción de estos conjuntos hace uso del axioma de elección para realizar una cantidad no numerable de elecciones arbitrarias.

\end{example}

\begin{defn}[Compacto]
En cualquier topología un compacto es un conjunto tal que de todo recubrimiento mediante abiertos se puede extraer un recubrimiento finito.
\end{defn}

\begin{theorem}
En $\mathbb{R}$ todo compacto es cerrado y acotado
\end{theorem}

Vamos  a movernos en I=(a,b) con a<b. Dado $S \subset (a,b)$  vamos a definir la medida interior y la medida exterior. Para aquellos conjuntos en los que estas dos medidas coincidan definiremos la medida y consideraremos esos conjuntos como medibles.

\section{Medida exterior}
\begin{defn}[Medida\IS exterior ($m^*$)] Es el ínfimo de la suma de las longitudes de los conjuntos que forman todos los recubrimientos posibles.
\[m^*(S) = \inf \lbrace \sum_{k=1}^{\infty} \abs{I_k}, S\subset \bigcup_{k=1}^{\infty} I_k \rbrace\]

Es decir, tomamos el conjunto de todas las familias recubridoras, asignamos a cada familia un número (suma de las longitudes de cada conjunto de la familia) y tomamos el ínfimo.
\end{defn}

Veamos algunas propiedades de la medida exterior:
\begin{enumerate}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 1
\item \textbf{Monotonía} Dados dos conjuntos $S_1 \subset S_2 \Rightarrow m^*(S_1) \leq m^*(S_2)$
\begin{proof}
Es trivial. Puesto que $S_1$ se contiene en $S_2$ todo recubrimiento de $S_2$ será recubrimiento de $S_1$ por tanto, al tomar el ínfimo de todos los recubrimientos de $S_1$ tendremos un resultado, al menos, tan pequeño como el ínfimo de los recubrimientos de $S_2$, es decir:
\[m^*(S_1) \leq m^*(S_2)\]
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 2
\item \textbf{Subaditividad}
\[\forall O \text{ abierto, } O = \bigcup_{1}^{\infty}I_k, \ I_k \text{ abiertos y disjuntos } \Rightarrow m^*(O)=\sum_{1}^{\infty}\abs{I_k}\]
\begin{proof}
Si tenemos expresado O como unión de abiertos disjuntos, no puede haber un recubrimiento menor que el formado por esos mismos abiertos.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 3
\item \[ m^*(S) = \inf_O \lbrace m^*(O)\tq S \subset O \text{ abierto} \rbrace \]
\begin{proof}
Con un argumento similar al empleado para demostrar la primera propiedad, queda claro que
\[ m^*(S) \leq \inf_O \lbrace m^*(O)\tq S \subset O \text{ abierto} \rbrace \]

\textcolor{blue}{Ese  ínfimo no se aplica sobre un O cualquiera, sino que es el ínfimo de todos los O posibles no.\\
$ m^*(S) = \inf_O \lbrace m^*(O)\tq S \subset O \text{ abierto} \rbrace$ o así:\\
$ m^*(S) = \inf \lbrace m^*(O), \forall O \tq S \subset O \text{ abierto} \rbrace$
}

Supongamos que es posible $m^*(S) < inf\left\{m^*(O)\right\}$.

En este caso, si tomo un $a$ tal que $ m^*(S) < a < inf\left\{ m^*(O)\right\}$ entonces existirían unos $\lbrace I_k\rbrace$ tales que $m^*(S) \leq \sum \abs{I_k} \leq a$, ya que si no el ínfimo sería $a$.

Pero por ser los $I_k$ abiertos su unión es un abierto, que llamaremos $O_1$. Entonces $m^*(O_1) \leq a$ pero esto nos lleva a una contradicción ya que habíamos dicho que $a < inf\left\{m^*(O)\right\}$.

Por tanto queda claro que no puede ser $m^*(S) < inf\left\{m^*(O)\right\}$.
\end{proof}

De esta propiedad puede extraerse que $ m^*(S) = m^*(O)$

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 4
\item Dado un conjunto $S \subset I$  numerable, $m^*(S)=0$
\begin{proof}
Si el conjunto es numerable podemos escribirlo como la unión numerable de intervalos de la forma $(a-\epsilon, a +\epsilon)$ siendo $m^*([a])=0 \forall a$, puesto que podemos tomar un $\epsilon$ tan pequeño como queramos.

Por ser el conjunto unión numerable de intervalos abiertos podemos aplicar la segunda propiedad con lo que obtenemos $m^*(S)=0$
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 5
\item Dado un intervalo $I_k \Rightarrow m^*(I_k)=\abs{I_k}$

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 6
\item Dada una familia de conjuntos $\lbrace S_n\rbrace_{n=1}^{\infty}$  entonces:
\[m^*(\bigcup S_n) \leq \sum m^*(S_n)\]
\begin{proof}
El recubrimiento de una familia de conjuntos será menor que la unión de los recubrimientos puesto que es posible que estos recubrimientos se superpongan. Así, el ínfimo del recubrimiento será menor que el ínfimo de la suma de los recubrimientos.
\end{proof}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 7
\item Dado un conjunto $K$ compacto y una familia $\lbrace I_k \rbrace$ tal que $K \subset \bigcup I_j$ entonces podemos extraer una colección finita $\lbrace I_k^{'} \rbrace$ tal que $K \subset \bigcup_1^N I_k^{'}$
\[m^*(K) = inf\left\{\sum_1^N \abs{I_j^{'}} \tq K\subset \bigcup_1^N I_j^{'} \right\}\]
\begin{proof}
La propia definición de compacto nos garantiza que podemos extraer un recubrimiento finito, el cual nos permite escribir la fórmula anterior.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 8
\item Si K es un compacto, dado un $\epsilon > 0, \ \exists O$ abierto, unión finita de intervalos abiertos disjuntos, que recubre a K ($K\subset O$) y tal que
\[m^*(O\smallsetminus K) < \epsilon\]

Es decir, podemos hacer que la diferencia entre el compacto K y el abierto O que lo recubre sea todo lo pequeña que queramos.

\begin{proof}
La medida de un conjunto es siempre menor que la medida de los abiertos que lo contienen. Por tanto, existe un abierto A con $K \subset A$ tal que:
\[m^*(K) \leq m^*(A) \leq m^*(K) + \epsilon\]

$A \smallsetminus K = A \cap K^c$ y por ser intersección de abiertos es un abierto y podemos expresarla como unión de abiertos disjuntos:
\[A \smallsetminus K = \bigcup_1^{\infty} I_n\]
Y tenemos que:
\[\sum_1^{\infty}\abs{I_n} < \infty\]
puesto que los $I_n$ son disjuntos y completan $A \smallsetminus K$ que era finito

Por ser una suma infinita que da un resultado finito:
\[ \forall \epsilon \ge 0,  \exists N : \sum_{n > N}^{\infty}\abs{I_n} < \frac{\epsilon}{2}\]

Llamo ahora $I_n^{'}=\overline{I_n}$  $n=1,2,\dotsc$ y tenemos obviamente $\abs{I_n^{'}}=\abs{I_n}$ por ser $I_n^{'}$ el cierre de $I_n$

Le quitamos a $A$ una unión finita de cerrados
\[ O = A \smallsetminus \bigcup_1^N I_n^{'} = A \bigcap (\bigcup_1^{N}I_n^{'})^c = \ abierto \]
Por tanto $O$ es una unión finita de abiertos y tiene una medida exterior que es $\frac{\epsilon}{2}$ menor que la de A.

Pero por construcción tenemos que:
\[m^*(A \smallsetminus K) \leq m^{*}(A)-m^{*}(K) \leq \epsilon\]

Y tomando el $O$ que hemos construido llegamos a
\[m^*(O \smallsetminus K) \leq m^*(O)-m^*(K) = m^*(A) - \frac{\epsilon}{2} - m^*(K) \leq \epsilon - \frac{\epsilon}{2} = \frac{\epsilon}{2}\]

Puesto que igual que hemos tomado $\frac{\epsilon}{2}$ podríamos haber tomado cualquier otro cociente de $\epsilon$, queda probado que podemos hacer que $m^*(O\smallsetminus K)$ fuera tan pequeño como quisiésemos.
\end{proof}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 9
\item Sea $I=(a,b)$, $K$ un compacto contenido en $I$, entonces se cumple que:
\[m^*(K)+m^*(I \smallsetminus K) = \abs{I}\]

\begin{proof}
Por el teorema anterior, dado $\epsilon > 0, \exists O$, unión finita de intervalos abiertos disjuntos tenemos:
\[m^*(O \smallsetminus K) < \epsilon\]

Tenemos que, lógicamente $O \cup I \smallsetminus O = I$

Por tanto
\[m^*(O)+m^*(I \smallsetminus O) = \abs{I}\]

Sabiendo que $I \smallsetminus K  \subset  \left( I \smallsetminus O \right) \cup \left( O \smallsetminus K \right)$, deducimos:
\[m^*\left(I \smallsetminus K\right) \leq m^*\left(I \smallsetminus O\right) + m^*\left(O \smallsetminus K\right)\]

Si usamos que $m^*\left(K\right) \leq m^*\left(O\right)$, a partir de la desigualdad anterior obtenemos:
\[m^*\left(K\right) + m^*\left(I \smallsetminus K\right) \leq m^*\left(O\right) + m^*\left(I \smallsetminus O\right) + m^*\left(O \smallsetminus K\right) \leq \abs{I} + \epsilon \forall \epsilon\]

\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 10
\item Sea $\lbrace O_n\rbrace_{n=1}^{\infty}$ una colección numerable de abiertos disjuntos. Consideremos el conjunto $O=\bigcup_{n=1}^{\infty}O_n$ entonces:
\[m^*(O)=\sum_1^{\infty}m^*(O_n)\]
Es decir, la medida exterior es numerablemente aditiva sobre abiertos disjuntos.

\begin{proof}
Cada $O_n=\bigcup_{k=1}^{\infty}I_n^k$ donde los $I_n^k$ son abiertos disjuntos, por ser los $O_n$ abiertos.

Por tanto $O$ es la unión numerable de intervalos abiertos disjuntos, cada uno de los cuales es a su vez unión numerable de intervalos disjuntos, es decir:
\[O= \bigcup_{n=1}^{\infty}O_n = \bigcup_{n,k=1}^{\infty} I_n^k\]
de donde, como ya hemos demostrado anteriormente, podemos extraer:
\[m^*(O)=\sum_{n,k=1}^{\infty}I_n^k = \sum_{n=1}^{\infty}\sum_{k=1}^{\infty}I_n^k=\sum_{n=1}^{\infty} m^*(O_n)\]
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 11
\item Dados dos conjuntos $C_1, C_2 \subset I_1$  tales que la distancia entre $C_1$  y $C_2$ es mayor que 0, entonces:
\[m^*(C_1 \cup C_2) = m^*(C_1) + m^*(C_2)\]

Considerando la distancia como:
\[\mop{dist}(C_1, C_2) =  \inf\lbrace \abs{x-y}, x\in C_1, y\in C_2 \rbrace \]

\begin{proof}
Dado $\epsilon > 0$, tenemos que $m^*(C_1) + m^*(C_2) \leq m^*(C_1 \cup C_2) +  \epsilon$

Si comprobamos que esto se cumple para cualquier $\epsilon$ tendremos la igualdad, puesto que podremos tomar un $\epsilon$ infinitamente pequeño.

Dado $\epsilon > 0 \ \exists O$ abierto tal que $C_1 \cup C_2 \subset O$, entonces, como ya comprobamos, tenemos que:
\[m^*(O) \leq m^*(C_1 \cup C_2) + \epsilon  \ \forall \epsilon\]

Ahora definimos:
\[\rho = \mop{dist}(C_1, C_2)\]
\[O_1 = O \cap \lbrace x \tq \mop{dist}(x, C_1) < \frac{\rho}{2} \rbrace\]
\[O_2 = O \cap \lbrace x \tq \mop{dist}(x, C_2) < \frac{\rho}{2} \rbrace\]
Siendo estos dos conjuntos disjuntos y abiertos.

Como $C_1 \subset O_1$ y $C_2 \subset O_2$ por construcción, tenemos:
\[m^*(C_1) + m^*(C_2) \leq m^*(O_1) + m^*(O_2) \underbrace{=}_{\text{por ser disjuntos}} m^*(O_1 \cup O_2) \leq m^*(O) < m^*(C_1 \cup C_2) + \epsilon \ \forall \epsilon\]
Por tanto
\[m^*(C_1) + m^*(C_2) = m^*(C_1 \cup C_2)\]
\end{proof}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 12
\item La medida exterior es numerablemente aditiva sobre los compactos, es decir, que si tomamos como $\lbrace K_i \rbrace_{i=1}^{\infty}$ la sucesión de compactos disjuntos dos a dos, entonces \[ m^*\left(\bigcup_1^{\infty}K_i\right) = \sum_1^{\infty}m^*(K_i) \]

\begin{proof}
La demostración es simple, por ser compactos y disjuntos dos a dos, sabemos que dados dos conjuntos :
\[m^*(K_1) + m^*(K_2) = m^*(K_1 \cup K_2)\]
Y esto puede ser extendido a cualquier número de conjuntos N:
\[m^*(\bigcup_1^{N}K_i) = \sum_1^{N}m^*(K_i)\]
Puesto que esta unión finita se contiene en una unión infinita de esos conjuntos, tenemos:
\[m^*(\bigcup_1^{N}K_i) \leq m^*(\bigcup_1^{\infty}K_i)\]
Y por tanto:
\[m^*(\bigcup_1^{\infty}K_i) \geq \sum_1^{\infty}m^*(K_i)\]

Pero, ya habíamos visto que:
\[m^*(\bigcup_1^{\infty}K_i) \leq \sum_1^{\infty}m^*(K_i)\]
de donde podemos deducir la igualdad
\end{proof}
\end{enumerate}

\section{Medida interior}
\begin{defn}[Medida\IS interior ($m_*$)]
Dado un conjunto $C \subset I$ la medida interior de C es la diferencia entre la medida de I y la medida exterior del ``complementario'' de C respecto a I.
\[m_*(C) = \abs{I} - m^*(I \smallsetminus C)\]
\end{defn}

Veamos algunas propiedades de la medida interior
\begin{enumerate}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 1
\item Si K es compacto la medida exterior y la interior coinciden.
\begin{proof}
Por ser K compacto sabemos que:
\[m^*(K) + m^*(I\smallsetminus K) = \abs{I}\]
De aquí podemos despejar la medida exterior obteniendo la misma fórmula que para la medida inferior, de donde podemos deducir la igualdad.
\end{proof}

 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 2
\item \[m_*(C) \leq m^*(C)\]
\begin{proof}
Está claro que:
\[C \cup (I \smallsetminus C) = I\]
Por tanto tenemos que:
\[\abs{I} \leq m^*(I \smallsetminus C) + m^*(C) \Rightarrow m^*(C) \geq \abs{I} - m^*(I \smallsetminus C) = m_*(C)\]
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 3
\item La medida interior también puede definirse como:
\[m_*(C) = \sup \lbrace  m^*(K) \tq  K\;\text{compacto},\; K \subset C \rbrace \]

\begin{proof}
Dado $\epsilon \geq 0, \exists K \subset C$ tal que $m^*(K) \geq m_*(C) - \epsilon$

Ya que
\[m^*(K) \leq m^*(C) \leq m^*(K) + \epsilon
\Rightarrow m^{*}(K) \geq m^*(C) - \epsilon \geq m_*(C) - \epsilon\]
Por tanto $m_*(C) = \sup\left\{m^*(K)\right\}$
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 4
\item Dada una sucesión de compactos $\lbrace K_n \rbrace_{n=1}^{\infty}$
\[m_*(\bigcup_{n=1}^{\infty}K_n) \geq m_*(\bigcup_{n=1}^{N}K_n)= m(\bigcup_{n=1}^{N}K_n) \geq \sum_{n=1}^{\infty}m(K_n)-\epsilon = m^*(\bigcup_{n=1}^{\infty}K_n) - \epsilon\]
Con esto hemos probado que la suma interior es mayor o igual que la exterior menos un $\epsilon$, para cualquier $\epsilon$ y por tanto es cierta para $\epsilon = 0$. Es decir, la suma interior de una unión numerable de compactos es mayor que la suma exterior.

Pero, por la propiedad 1, ya sabemos que esto ocurre también al revés.

Por tanto, podemos comprobar que son iguales, lo que implica que la unión numerable de compactos tiene igual medida exterior e interior

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Propiedad 5
\item \textbf{Superaditividad}
\[\forall n \in \mathbb{N}, C_n \subset I : \forall i,j C_i \bigcap C_j = \emptyset \Rightarrow m_*(\bigcup_{n=1}^{\infty} C_n) \geq \sum_{n=1}^{\infty}m_*(C_n)\]

\begin{proof}
\[ \forall \epsilon > 0, \forall n \in \mathbb{N} \ \exists K_n \ compacto \ K_n \subset C_n \tq m(K_n) \geq m_*(C_n) - \frac{\epsilon}{2^{n+1}}\]

Sean $K=\cup K_n$ y $C=\cup C_n$, tenemos que $K\subset C$  siendo los $K_n$ disjuntos por construcción. Por tanto tenemos:
\[m(K) = \sum _{n=0}^{\infty}m(K_n) \geq \sum _{n=0}^{\infty}(m_*(C_n)- \frac{\epsilon}{2^{n+1}}) = \sum_{n=0}^{\infty} m_*(C_n) - \epsilon\]

Pero también sabemos que la medida interior de $C$ es mayor que la de $K$, con lo que obtenemos:
\[m_*(C) \geq m_*(K) = m(K) \geq \sum_{n=0}^{\infty} m_*(C_n) - \epsilon\]
que es lo que queríamos demostrar
\end{proof}
\end{enumerate}

\begin{defn}[Medibilidad]
Un conjunto $C \subset I$ es medible cuando
\[m_*(C)=m^*(C)\]
y entonces escribimos que la medida $m(C)$ es uno de esos dos valores.
\end{defn}

Por la última propiedad definida sobre la medida interior podemos ver que la unión numerable de compactos es medible. Así mismo, por la primera propiedad de la medida interior podemos concluir que los compactos son medibles.

\obs Un conjunto es medible si y sólo si su complementario es medible.

\begin{prop}
\[\forall n \in \mathbb{N}, C_n \ medible \ : (i \neq j \Rightarrow C_i \cap C_j) \Rightarrow \bigcup_{n=0}^{\infty} C_n \ medible\]
Además:
\[m(\bigcup_{n=0}^{\infty}C_n) = \sum_{n=0}^{\infty} m(C_n)\]
\end{prop}
\begin{proof}
Sea $C=\cup_{n=0}^{\infty} Cn$  sabemos que $m_*(C) \leq m^*(C)$.

Por otro lado:
\[m^*(C) \leq \sum_{n=0}^{\infty}m^*(C_n) = \sum_{n=0}^{\infty}m_*(C_n) \leq m_*(C) \]

De donde podemos deducir:
\[m_*(C) = m^*(C) \Rightarrow C \text{ es  medible} \]
\end{proof}

Vamos a ver ahora el buen comportamiento que los conjuntos medibles tienen por medio de la unión y la intersección, tanto finitas como infinitas numerables.

Pero antes necesitamos el siguiente resultado:
\begin{prop} $C \subset I$ \ es \ medible $\Leftrightarrow \forall \epsilon > 0$ e existe un $K$ compacto y un $O$ abierto, con $K⊆C⊆O⊆I$ tales que $m(O\setminus K) < \epsilon$.
\end{prop}

\begin{proof}
\begin{itemize}
\item $\Rightarrow$
\[\exists K \subset C \tq m(C\smallsetminus K ) < \frac{\epsilon}{2}\]
\[\exists O, C \subset O \tq m(O\smallsetminus C ) < \frac{\epsilon}{2} \]
Por tanto $m(O\smallsetminus K) < \epsilon$ ya que $O \smallsetminus K = (O \smallsetminus C) \cup (C \smallsetminus K)$

\item $\Leftarrow$
\[\forall \epsilon > 0, m^*(C)-m_*(C) < \epsilon\]
\[m(O)=m(K) + m(O\smallsetminus K)\]
\[m(O) = m(K) + \ (algo \ < \epsilon)\]
\[m^*(C) - m_*(C) \leq m(O)-m(K) < \epsilon\]
\end{itemize}
\end{proof}

\begin{prop}
Sean $C_1, C_2 \subset I$ medibles $\Rightarrow C_1 \cup C_2, C_1 \cap C_2, C_1\smallsetminus C_2$  son medibles
\end{prop}
\begin{proof}
%TODO quitar este párrafo y escribir la demostración
Basta con probar una de ellas, por ejemplo, la unión, ya que a partir de ahí podemos demostrar el resto basándonos en la propiedad de que un conjunto es medible sii lo es su complementario.

Veamos como demostramos que la unión de medibles es medible. Sean $C_1,C_2⊆I$ medibles. Entonces, $\forall \epsilon > 0$ existen $K_1, K_2$ compactos y $O_1, O_2$ abiertos tales que
\[K_1 \subset C_1 \subset O_1, \ K_2 \subset C_2 \subset O_2 \ y \ m(O_1 \smallsetminus K_1) < \frac{\epsilon}{2}, m(O_2 \smallsetminus K_2) < \frac{\epsilon}{2}\]
Entonces
\[K_1\cup K_2 \subset C_1 \cup C_2 \subset O_1\cup O_2\]
Por tanto:
\[m((O_1 \cup O_2)\smallsetminus (K_1 \cup K_2)) \leq m(O_1 \smallsetminus K_1) + m(O_2 \smallsetminus K_2) \]
ya que
\[((O_1 \cup O_2)\smallsetminus (K_1 \cup K_2)) \subset (O_1 \smallsetminus K_1)\cup (O_2 \smallsetminus K_2)) \]
de modo que tenemos:
\[m(O_1 \smallsetminus K_1) + m(O_2 \smallsetminus K_2) \leq \frac{\epsilon}{2} + \frac{\epsilon}{2} = \epsilon\]
\end{proof}

Ya sabemos que la unión numerable de medibles disjuntos es medible. Vamos a extenderlo ahora para una unión cualquiera de medibles:

\begin{prop}
\[ \forall n \in \mathbb{N}, C_n \subset I \text{  medibles} \Rightarrow \bigcup_{n=0}^{\infty} C_n, \bigcap_{n=0}^{\infty} C_n  \text{ son medibles} \]
\end{prop}
\begin{proof}
Si conseguimos escribir esta unión numerable como unión disjunta de medibles, ya lo tendríamos hecho.

Para conseguirlo, tomamos el primer conjunto; del segundo, tomamos lo que no está en el primero; del tercero, lo que no está en el primero ni el segundo; y así sucesivamente.

Es decir, antes de unir el siguiente conjunto, le resto la unión de los anteriores. Esta unión, por construcción, será numerable y por tanto lo será la diferencia.

Así, acabamos obteniendo una unión numerable de disjuntos, que ya sabemos que es numerable, y que representa exactamente el mismo conjunto.
\end{proof}

\begin{prop}[Caratheodory]\index{Proposición! de Caratheodory} $ $ % hack: forces linebreak

$M \subset (a,b)$  es medible sii:
\[ \forall C \subset (a,b), m^*(C)=m^*(C\cap M)+m^*(C \smallsetminus M) \]
\end{prop}
\begin{proof}
\begin{itemize}
\item $\Leftarrow$.

Obvio tomando $C=(a,b)$
Ya que de este modo el término de la derecha de la proposición quedará:
\[m^*(I) = m^*(M) + m^*(I \smallsetminus M)\]
\[m^*(M) = m^*(I) - m^*(I \smallsetminus M) = m_*(M)\]
Y por tanto $M$ es medible.

\item $\Rightarrow$

Si M es medible tenemos que:
\[m^*(C) \leq m^*(C\cap M)+m^*(C \smallsetminus M)\]

Así que nos falta demostrar la desigualdad contraria para tener la igualdad.

Pero sabemos que:
\[\forall \epsilon \exists A \subset (a,b) \ con \ C \subset A \tq m^*(C) \geq m(A)-\epsilon\]
Entonces
\[m(A)=m(A\cap M) + m (A \smallsetminus M) \geq m^*(C \cap M) + m^*(C\smallsetminus M)\]

Pero sumando $\epsilon$ a la desigualdad vista antes llegamos a que:
\[m^*(C) + \epsilon \geq m(A)\]

Y combinanto este resultado con el anterior tenemos:
\[m^*(C) + \epsilon \geq m^*(C \cap M) + m^*(C\smallsetminus M) \forall \epsilon\]

Y en concreto para un $\epsilon$ infinitamente pequeño, por lo que podemos escribir:
\[m^*(C) \geq m^*(C \cap M) + m^*(C\smallsetminus M)\]

\end{itemize}
\end{proof}

\section{Medida de Lebesgue en todos los reales}
Hasta ahora hemos estado definiendo la medida (de Lebesgue) para un intervalo. Nuestro propósito ahora es extender esta definición a toda la recta.

Para ello vamos a partir bien la recta en intervalos, calcular la medida del conjunto en cada intervalo y sumar.

Dado un conjunto $M \subset \mathbb{R}$, M es medible $\Leftrightarrow \forall n \in \mathbb{Z}, \ M \cap(n, n+1)$ es medible en (n, n+1) y entonces:
\[m(M)= \sum_{n \in \mathbb{Z}}m(M \cap (n, n+1))\]

El siguiente paso sería demostrar que esto es cierto para cualquier partición en intervalos de M.


\chapter{Teoría abstracta de la medida}
\section{Álgebras y $\salgb$}
\begin{defn}[Algebra\IS de conjuntos]
Dado un conjunto X, no vacío, y dado un subconjunto de sus partes $\algb{M} \subset P(X)$, se dice que $\algb{M}$ es un álgebra de conjuntos si:
\begin{enumerate}
\item $\algb{M}$ es no vacío.
\item $\algb{M}$ es cerrado por la unión finita.
\item $\algb{M}$ es cerrado por complementación finita.
\end{enumerate}
\end{defn}

De esta definición se deducen fácilmente las propiedades del álgebra de Boole:
\begin{itemize}
\item $X \in \algb{M}$
\item $\emptyset \in \algb{M}$
\item $A_1, A_2,...,A_n \in \algb{M} \Rightarrow A_1 \cup A_2 \cup ... \cup A_n \in \algb{M}$
\item $A_1, A_2,...,A_n \in \algb{M} \Rightarrow A_1 \cap A_2 \cap ... \cap A_n \in \algb{M}$
\end{itemize}

Lo que realmente nos interesa es la definición de $\salgb$, la extensión de un álgebra para operaciones numerables y no sólo finitas.

\begin{defn}[.$\salgb$] % HACK: el '.' evita mágicamente que pete
Se dice que $\algb{M}$ es una $\salgb$ de conjuntos si:
\begin{enumerate}
\item $\algb{M}$ es un álgebra de conjuntos
\item $A_1,A_2,...,A_n \in \algb{M} \Rightarrow \bigcup_{n=1}^{\infty} A_n\in \algb{M}$
\end{enumerate}
Es decir, tenemos un álgebra de conjuntos cerrada para uniones infinitas numerables.

\end{defn}

De esta definición se deduce que la intersección numerable de conjuntos queda dentro de la $\salgb$. Al igual que la unión numerable.

\textcolor{blue}{$\bigcup_{n=1}^{\infty} A_n$. Unión de un conjunto numerable de elementos. Ya que los naturales son numerables y va de n=1 hasta $\infty$.}

\begin{example}
Veamos algunos ejemplos de $\salgb$s
\begin{itemize}
\item Dado $X\neq \emptyset$, los conjuntos: $\lbrace \emptyset, X \rbrace$  y $P(X)$ son $\salgb s$.

\item Dado un conjunto $X$ no numerable, consideramos:
\[\algb{E}=\lbrace A \subset X \tq A \text{ numerable o } A^c \text{ numerable }\rbrace\]
$\algb{E}$ es una $\salgb$, básicamente, por que al escoger sólo los numerables la unión de numerables es numerable así como la intersección. El complementario de un conjunto numeable estará en $\algb{E}$ puesto que cumplirá la segunda condición.

\item Dado un conjunto $X$ infinito numerable, consideramos:
\[\algb{F}=\lbrace B \subset X \tq B \text{ finito o } B^c \text{ finito }\rbrace\]
$\algb{F}$ es un álgebra pero no una $\salgb$, ya que la unión infinita de finitos no es finita.
\end{itemize}
\end{example}

Veamos más propiedades:
\begin{itemize}
\item Si $\algb{M}$ es un álgebra de subconjuntos de X entonces:
\[\algb{M} \ es \ \salgb \Leftrightarrow [A_1,A_2,...\in \algb{M} \tq (i \neq j \Rightarrow A_i \bigcap A_j = \emptyset) \Rightarrow \bigcup_{i=1}^{\infty}A_i \in \algb{M}]\]

\begin{proof}
\begin{itemize}
\item $\Rightarrow$  Obvia
\item $\Leftarrow$:
Dada una sucesión de conjuntos cualesquiera $A_1,A_2... \in \algb{M}$ construimos una sucesión de conjuntos:

$B_1=A_1, \ B_2 = A_2\setminus A_1, \ B_3=A_3\setminus (A_1 \bigcup A_2)...$.

Por tanto tenemos que:
\[\bigcup_{i=1}^{\infty}A_i = \bigcup_{i=1}^{\infty} B_i \in \algb{M}\]
ya que los $B_i$ son disjuntos dos a dos.

Queda probado que $\algb{M}$ es cerrada por uniones infinitas y, por tanto, que $\algb{M}$ es una $\salgb$
\end{itemize}
\end{proof}

\item La intersección cualquiera de $\salgb s$ de conjuntos de un mismo $X$ es una $\salgb$.

\item Dados $X\neq \emptyset$ y $E \subset P(X)$ existe una mínima $\salgb$ que contiene a E, $\algb{M}(E)$
\[\algb{M}(E) = \bigcap_{E\subset \algb{M} \wedge \algb{M} \ \salgb \ de \ X}\algb{M} \]
Esta intersección es, obviamente, no vacía puesto que al menos hay una $\salgb$ que contiene a $E$: $P(X)$

\item Si $\algb{M}$ es una $\salgb$ y $E \subset \algb{M} \Rightarrow \algb{M}(E) \subset \algb{M}$, siendo $\algb{M}(E)$ la $\salgb$ generada por $E$
\end{itemize}

\section{$\salgb$ de Borel}
\begin{defn}[.$\salgb$ de Borel]
Dado un espactio topológico $(X,\algb{T})$ se llama $\salgb$ de Borel de ($X, \algb{T}$) a la mínima $\salgb$ que contiene a $\topl$ y la denotamos por $\algb{B}_X=\algb{M}(\algb{T})$

\end{defn}

\obs Otros conjuntos, además de $\topl$, que están en $\algb{B}_X$ son: los cerrados, la intersección numerable de abiertos: $G_\delta$, la unión numerable de cerrados: $F_\sigma$, unión numerable de $G_\delta$ y la intersección numerable de $F_\sigma$.

\begin{example}
\begin{itemize}
\item El conjunto [0,1) $\in \real$ es $F_\sigma$ y $G_\delta$ a la vez, ya que puede escribirse como:
\[[0,1) = \bigcap_{n=1}^{\infty}(-\frac{1}{n}, 1) = \bigcup_{n=1}^{\infty}[0, 1-\frac{1}{n}]\]

\item El conjunto $\nat$ es, también, $F_\sigma$ y $G_\delta$:
\[\nat = \bigcup_{n=1}^{\infty}\{n\} = \bigcap_{k=2}^{\infty}(\bigcup_{n=0}^{\infty}(n-\frac{1}{k}, n+ \frac{1}{k}))\]

\item El conjunto $\rac$, sin embargo, es $F_\sigma$ pero no es $G_\delta$
\[\rac = \bigcup_{q \in \rac}\{q\} \]
Si repetimos la construcción del apartado anterior pero con n recorriendo los racionales, el conjunto obtenido serían los reales.

Vamos a intentarlo de otra manera:
Sea $\{q_1, q_2, ...\}$ una enumeración de racionales y considero:
\[A^k=\bigcup_{i=1}^{\infty}(q_i-\frac{1}{2^{i+k+1}}, q_i+\frac{1}{2^{i+k+1}})\]
Cada intervalo tiene longitud $\frac{1}{2^{i+k}}$.

Si ahora sumamos todas estas longitudes llegamos a:
\[\sum_{i=1}^{\infty}\frac{1}{2^{i+k}} = \frac{1}{2^{k+1}}\sum_{i=1}^{\infty}\frac{1}{2^{i-1}}=\frac{1}{2^k}\]
%TODO añadir detalles

Queda claro que $\rac \subset A^k$ y que $A^k$ es abierto $\forall k$, lo que implica que $A^k$ es denso.

Sabemos además que $m(A^k)\leq \frac{1}{2^k}$.

Nuestra intución nos dice que A es $G_\delta$ siendo:
\[A= \bigcap_{k=2}^{\infty}A^k\]
Pero $A \nsubseteq \rac$.

Con esto vemos que esta construcción no nos permite escribir $\rac$ como un $G_\delta$ y, además, nos permite ver que no existe ninguna forma de representar $\rac$ como una $G_\sigma$.

\begin{proof}
Supongamos que $\rac$ es una $G_\delta$, entonces $\exists(A^k)$ sucesión de abiertos densos tales que $A^{k+1} \subset A^k$ y $\bigcup A^k=\rac$.

Vamos a construir ahora la sucesión:
\[B^k=A^k\setminus \{q_k\}\]
Siendo $B^k$ abierto y denso.

Sin embargo:
\[(\bigcap B^k)\bigcap \rac = \emptyset\]
ya que hemos ido extrayendo uno a uno todos los racionales.

Ahora vamos a probar que $\bigcap B^k \neq \emptyset$:
Sea $I_1$ un intervalo abierto contenido en $B^1$, $I_1\cap B^2$ es abierto y por tanto $\exists I_2$ abierto: $\bar{I_2} \subset I_1 \cap B^2$, siendo $I_2 \cap B³$ abierto.

Ahora sabemos que existe $\exists I_3$ abierto: $\bar{I_3} \subset I_2 \cap B^3$.

Así vamos construyendo una sucesión: $\bar{I_1}\supset\bar{I_2}\supset\bar{I_3}\supset...$

Al final llegamos a:
\[\exists p \in \bigcap \bar{I_k} \neq \emptyset, \ p \notin \rac\]
\[p \in \bigcap \bar{I_k} \subset \bigcap B^k \subset \bigcap A^k = A \Rightarrow A\nsubseteq \rac\]

%TODO ver si esto está claro
\end{proof}
\end{itemize}
\end{example}

Continuemos con el estudio de las $\salgb$ de Borel, centrándonos en su comportamiento en la recta.

\subsection{$\salgb$ de Borel en $\real$}
\begin{theorem}
La $\salgb$ de Borel en la recta, ($\algb{B}_\real$) está genereda por cualquiera de las siguientes clases:
\begin{enumerate}
\item Intervalos abiertos:
\[\varepsilon_1=\lbrace (a,b): a < b\rbrace\]
\item Intervalos cerrados:
\[\varepsilon_2=\lbrace [a,b]: a < b\rbrace\]
\item Intervalos semiabiertos:
\[\varepsilon_3=\lbrace (a,b]: a < b\rbrace\]
\[\varepsilon_4=\lbrace [a,b): a < b\rbrace\]

\item Intervalos infinitos abiertos:
\[\varepsilon_5=\lbrace (-\infty,a): a \in \real \rbrace\]
\[\varepsilon_6=\lbrace (a, \infty): a \in \real \rbrace\]

\item Intervalos infinitos cerrados:
\[\varepsilon_7=\lbrace (-\infty,a]: a \in \real \rbrace\]
\[\varepsilon_8=\lbrace [a, \infty): a \in \real \rbrace\]
\end{enumerate}
\end{theorem}

%TODO Esto habrá que mejorarlo
\begin{proof}
Está claro que $\varepsilon_1$ genera la $\salgb$ de Borel. Vamos a demostrar ahora que $\varepsilon_6$ forma la $\algb{B}_\real$.

Primero vamos a ver que:
\[\varepsilon_6 \subset \algb{B}_\real\]
que es cierto puesto que:
\[(a, \infty) = \bigcup_{n=1}^{\infty}(a,a+n)\]

Ahora vamos a probar la inclusión contraria y para ello vamos a ver que un elemento de $\algb{B}_\real$ cualquiera, (a,b) puede escribirse a partir de los elementos de $\varepsilon_6$:
\[(a,b) = (a, \infty) \cap (-\infty, b)\]
\[(-\infty, b) = \bigcup_{n=1}^{\infty}(- \infty, b - \frac{1}{n}]=\bigcup_{n=1}^{\infty}(b-\frac{1}{n}, \infty)^c\]
Con lo que queda probado que $(-\infty, b) \in \varepsilon_6$

El resto de apartados se demostrarían de forma muy similar.
\end{proof}

\subsection{$\salgb$ producto}
Vamos a trabajar con un producto cualquiera de $\salgb s$, sin necesidad de que sea finito ni numerable.

Dada $\{X_\alpha\}_{\alpha\in A}$, una colección de conjuntos no vacíos, consideramos el conjunto $\{\algb{M}_\alpha\}_{\alpha\in A}$, siendo $\algb{M}_\alpha$ una $\salgb$ de $X_\alpha$.

Sea $X=\prod_{\alpha\in A}X_\alpha=\{\rho: A \rightarrow \bigcup_{\alpha\in A} X_\alpha : \rho(\alpha)\in X_\alpha\}$.


\obs Coincide con la definición de producto cartesiano habitual: \[X=X_1\times X_2=\{\rho: \{1,2\} \rightarrow X_1 \bigcup X_2 : \rho(1)\in X_1 \wedge \rho(2) \in X_2\}\]

Esta definición de producto cartesiano representa lo que queremos pero presenta un problema, que radica en la definición de función.

Una función se define como un subconjunto de un producto cartesiano, por lo que entramos en recursividad: la definición de conjunto cartesiando pasa por la de función y viceversa.

 Para resolver este problema se define el producto cartesiano de dos elementos como siempre hemos visto y no como aparece aquí representado. Para más de dos conjutnos es totalmente válida esta definición.


\begin{defn}[.$\salgb$ producto: $\otimes_{\alpha\in A}\algb{M}_\alpha$]
Se define la $\salgb$ producto como la $\salgb$ generada por:
\[\varepsilon_1 = \{\pi_\alpha^{-1}(E):E \in \algb{M}_\alpha, \alpha\in A\}\]
donde $\pi_\alpha: X \rightarrow X_\alpha$
\end{defn}

\begin{prop}
Con la notación anterior, si $A$ es numerable, entonces $\otimes_{\alpha\in A}\algb{M}_\alpha$ está generada por:
\[\varepsilon_2 = \{\prod_{\alpha\in A}E_\alpha:E_\alpha \in \algb{M}_\alpha\}\]
La necesidad de que $A$ sea numerable viene de que ya vimos que las $\salgb$ son cerradas por uniones e intersecciones numerables.

Si $A$ no fuese numerable, podemos definir $\varepsilon_2$ pero con el obtendremos una $\salgb$ mayor, que contendrá elementos que realmente no pertenecen a la $\salgb$ que estamos trabajando.
\end{prop}
\begin{proof}
Tenemos que ver las dos relaciones de contenido:
%TODO ni idea de que puñetas dice esta demostración.
\begin{itemize}
\item $\subset$
Todo elemento de $\varepsilon_1$ está en $\epsilon_2$ ya que:
\[\pi^{-1}(E_n)=\prod_{k \in \nat}E_k : \forall k\neq n, E_k=X_k\]
\[\algb{M}(\epsilon_1)=\otimes_{\alpha \in A}\algb{M}_\alpha \subset \algb{M}(e_2)\]
\item $\supset$
Todo elemento de $\epsilon_2$ se genera con elementos de $\epsilon_1$:
\[\prod_{\alpha\in A}E_\alpha = \bigcap_{\alpha\in A} \pi^{-1}(E_\alpha)\]
\end{itemize}
\end{proof}

\begin{prop}
Con la notación anterior, si $\algb{M}_\alpha$ es la $\salgb$ generada por un conjunto $\epsilon_\alpha$, es decir: $\algb{M}_\alpha = \algb{M}(\epsilon_\alpha)$ entonces:
\[\algb{F}_1= \{\pi^{-1}_\alpha(E_\alpha): \alpha \in A, E_\alpha \in \epsilon_\alpha\}\]
genera $\otimes_{\alpha\in A}\algb{M}_\alpha$
\end{prop}
\begin{proof}
\begin{itemize}
\item $\subset$
Esta inclusión es trivial
$\algb{F}_1 \subset \epsilon_1 \Rightarrow \algb{M}(\algb{F}_1) \subset \otimes_{\alpha\in A}\algb{M}_\alpha$
\item $\supset$
Observemos que:
\[\{E \subset X_\alpha: \pi^{-1}_\alpha(E)\in \algb{M}(\algb{F}_1)\}\]
es una $\salgb$, (lo que probaremos al hacer el ejercicio 4 de la hoja 2) que contiene a $\epsilon_\alpha$, por ser el conjunto de generadores, y por tanto contiene a $\algb{M}_\alpha$ puesto que contiene a todos los generadores.

Entonces
\[\forall E  \in \algb{M}_\alpha, \pi^{-1}_\alpha(E) \in \algb{M}(\algb{F}_1)\]
es decir, $\epsilon_1 \subset \algb{M}(\algb{F}_1)$ y por tanto:
\[\algb{M}(\epsilon_1)=\otimes_{\alpha\in A}\algb{M}_\alpha \subset \algb{M}(\algb{F}_1)\]
\end{itemize}
\end{proof}

\begin{corol}
Si $A$ es numerable y cada $\algb{M}_\alpha$ está generada por $\epsilon_\alpha$ entonces $\otimes_{\alpha\in A}\algb{M}_\alpha$ está generado por:
\[\algb{F}_1 = \{\prod_{\alpha\in A}E_\alpha, E_\alpha \in \epsilon_\alpha\}\]
\end{corol}


\begin{prop}
Sean $X_1, X_2, ...X_n$ espacios topológicos que cumplen el segundo axioma de numerabilidad y sea $X$ el espacio topológico producto. Entonces:
\[\otimes_{i=1}^n \algb{B}_{X_i} = \algb{B}_X\]

\end{prop}

\section{Medida}
Vamos a ver algunas definiciones asociadas a la medida.

\begin{defn}[Espacio medible]
Dado un conjunto no vacío $X$ y una $\salgb$ $\algb{M} \subset \algb{P}(X)$, decimos que el par ($X, \algb{M}$) es un espacio medible.
\end{defn}

\begin{defn}[Medida\IS en ($X, \algb{M}$)]
Es una función $\appl{µ}{\algb{M}}{[0, +\infty)}$ tal que:
\begin{enumerate}
\item La medida del conjunto vacío es 0.
\[µ(\emptyset)=0\]
\item La medida de la unión de conjuntos disjuntos es la suma de las medidas.
\[\forall n \in  \nat, \ E_n \in \algb{M}: (i\neq j \implies E_i\cap E_j = \emptyset), \ µ(\bigcup_{n=0}^{\infty}E_n)=\sum_{n=0}^{\infty}µ(E_n)\]
\end{enumerate}

Se dice que µ es una función de conjunto numerablemente aditiva ($\sigma$-aditiva)
\end{defn}

\begin{defn}[Espacio de medida]
Conjunto ($X, \algb{M}, µ$) donde ($X, \algb{M}$) es un espacio medible y µ una medida en él.
\end{defn}

Veamos algunos ejemplos de espacios de medida.
\begin{example}
\begin{itemize}
\item $(X, \{X, \emptyset\}, µ)$ donde µ($\emptyset$)=0 y µ($X$)=1.

\item $(X, \algb{P}(X), µ)$ donde $\appl{f}{X}{[0, \infty]}$ y $\forall E \subset X \ µ(E)=\sum_{x \in E}f(x)$

\item \textbf{Medida de Cantor}. Se trata de un caso particular del ejemplo anterior.

Definios $\appl{f}{X}{[0, \infty)}$ con $f(x)=1 \forall x \in X$.

Definimos µ($E$) como en el apartado anterior.

Entonces si $E$ es finito, $µ(E)$ = \#$E$ y si $E$ es infinito, $µ(E)$=$\infty$

\item \textbf{Medida puntual o Delta de Dira}
Idéntico a los anteriores salvo que nuestra $f$ vale 1 en un único punto y 0 en todos los demás.

\item Vamos a construir un espacio de probabilidad, contemplando el experimento de lanzamiento de una moneda. Entonces nos queda:

\[X=\{c, x\}, \ µ(\{c\})=µ(\{x\})=\frac{1}{2}\]

\item Podemos extender el espacio de probabilidad anterior con dos posibles observaciones a uno mayor:
\[X=\{a_1, a_2, ..., a_n\}, \ µ(\{a_i\})=p_i \text{ tal que } p_i\in(0,1), \ \sum_{i=1}^{n}=1\]

\item \textbf{Medida de Lebesque} en la $\salgb$ de los medibles de un intervalo (a,b).

En este caso $\appl{µ}{\algb{M}}{b-a}$

\item \textbf{Medida de Lebesque} en la $\salgb$ de los medibles de un $\real$

En este caso $\appl{µ}{\algb{M}}{[0, \infty]}$

\end{itemize}

\subsection{Nomenclatura}
\begin{defn}[Medida finita]
Dado un espacio de medida ($X, \algb{M}, µ$), decimos que µ es finita si µ($X$)< $\infty$
\end{defn}

\begin{defn}[Medida $\sfin$]
Dado un espacio de medida ($X, \algb{M}, µ$), decimos que una medida es $\sfin$ si el conjunto $X$ puede expresarse como una unión de elementos de la $\salgb$ de medida finita. Es decir: \[X=\bigcup_{n=1}^{\infty}E_n, \ E_n \in \algb{M} \text{ y }µ(E_n)< \infty\]
\end{defn}

\begin{defn}[Conjunto $\sigma$-finito]
Dado un espacio de medida ($X, \algb{M}, µ$), un conjunto $E \subset X$ es $\sigma$-finito si puede expresarse como unión de elementos de la $\salgb$ con medida finita. Es decir:

\[E\subset \algb{M}, \ E=\bigcup_{n=0}^{\infty} E_n, \ E_n \in \algb{M} \text{con} \ µ(E_n)< \infty\]
\end{defn}

\begin{defn}[Medida semifinita]
Dado un espacio de medida ($X, \algb{M}, µ$), se dice que µ es semifinita si todo $E\in \algb{M}$ tiene un subconjunto $F\subset F$ con $F\in \algb{M}$ tal que 0<µ($E$) < $\infty$
\end{defn}
\end{example}

\subsection{Propiedades}
Vamos a ver algunas propiedades de ($X, \algb{M}, µ$).

\begin{enumerate}
\item \textbf{Monotonía} Dados dos elementos $E. F, \in \algb{M}$ tales que $E\subset F$, entonces: µ($E$)$\leq µ(F)$
\begin{proof}
Sencillo puesto que podemos escribir:
\[F=E\cup(F \setminus E)\]
Puesto que se trata de una unión de conjuntos disjuntos podemos escribir:
\[µ(F)=µ(E)+µ(F\setminus E)\]
y puesto que las medidas siempre son positivas, es obvio que:
\[µ(F) \leq µ(E)\]
\end{proof}

\item \textbf{Subaditividad}
\[E_i \in \algb{M} \implies µ(\bigcup_{i=1}^{\infty}E_i)\leq \sum_{i=1}^{\infty}µ(E_i)\]

\begin{proof}
Sabemos que dados dos conjutnos $E_1 \cup E_2 $ = $E_1 \cup (E_2 \setminus E_1)$

Por tanto  $µ(E_1 \cup E_2) $ = µ($E_1) + µ(E_2 \setminus E_1) \leq µ(E_1)+µ(E_2)$

Esta propiedad es fácilmente extendible a un número infinito de conjuntos.
%TODO MALVADO, confirma que esto es así y quita este comentario
\end{proof}

\item \textbf{Continuidad inferior} Dada una familia $E_n$ de medibles crecientes, es decir $E_{i}\subset E_{i+1} \forall i$, entonces
\[µ(\bigcup_{i=1}^{\infty}E_i)=\lim_{i \to \infty} µ(E_i)\]

\begin{proof}
Vamos a construir una sucesión de subconjuntos disjuntos. Para ello definimos $D_0=\emptyset$ y definimos $D_n=E_n \setminus E_{n-1}$

Tenemos así:
\[µ(\bigcup_{n=1}^{\infty}E_n)=\sum_{n=1}^{\infty}µ(D_n)=\lim_{n \to \infty}
\sum_{j=1}^{n}µ(D_j)=\lim_{n \to \infty}µ(\bigcup_{j=1}^{n}D_j) = \lim_{n \to \infty}µ(E_n)\]
\end{proof}

\item \textbf{Continuidad superior} Dada una familia $E_n$ de medibles decrecientes, es decir $E_{i}\supset E_{i+1} \forall i$, si $\exists n: µ(E_n)< \infty$ entonces:
\[µ(\bigcap_{i=1}^{\infty}E_i)=\lim_{i \to \infty} µ(E_i)\]

Veamos un ejemplo de por qué es necesario que al menos uno de esos conjuntos sea finito
\begin{example}
Tomemos el espacio medible $(\nat, \algb{P}(X), µ)$

Vamos a definir la sucesión de conjuntos $E_i=\{i, i+1, i+2,...\}$.

La intersección de estos conjuntos es el vacío, por lo que la medida de la intersección sería 0 mientras que el límite de las medidas es infinito, puesto que todas son infinitas.
\end{example}

Veamos ahora la demostración de la propiedad:

\begin{proof}
Es parecida a la de la continuidad inferior, salvo que no podemos pasar al complementario tan a la ligera, pues existe el riesgo de que los complementarios sean infinitos y nos encontremos con el mismo problema indicado en el ejemplo. Tenemos que proceder de forma ligeramente distinta:

\textcolor{red}{Completado por mi. No fiarse al 100\%}

Sin pérdida de generalidad, suponemos que $µ(E_1) < \infty$. En caso de no ser el primero el conjunto finito podemos reestructurarlos para que así sea.

Ahora vamos a construir la sucesión $D_i$ siendo $D_1=E_1$ y $D_n=E_1\setminus E_n$, obteniendo así una sucesión $D_n$ creciente de conjuntos disjuntos.

Con esto, tenemos:
\[µ(\bigcap_{n=1}^{\infty}E_n) = µ(\bigcap_{n=1}^{\infty}E_1\setminus D_n) = µ(E_1 \setminus \bigcup_{n=1}^{\infty}D_n) = µ(E_1) - µ(\bigcup_{n=1}^{\infty}D_n) = µ(E_1) - \sum_{n=1}^{\infty}µ(D_n) =\]
\[=µ(E_1) - \lim_{n \to \infty} \sum_{n=1}^{n}µ(D_n) = µ(E_1) - \lim_{n \to \infty}µ(\bigcup_{j=1}^{n}D_j) = µ(E_1)-\lim_{n \to \infty}(µ(E_1)-µ(E_n))=\]
\[= µ(E_1)-µ(E_1)+\lim_{n \to \infty}µ(E_n)=\lim_{n \to \infty}µ(E_n)\]

\end{proof}
\end{enumerate}

\subsection{Compleción de una medida}

\begin{defn}[Medida 0]
Por increíble que parezca, un conjunto de medida 0 es un conjunto cuya medida es igual a 0.
\end{defn}

\begin{defn}[Casi por doquier]
Propiedad que se verifica en todo $X$ salvo, quizás, en un conjunto de medida 0.
\end{defn}

\begin{defn}[Medida completa µ]
µ es completa si $\forall A \in \algbM$ tal que $µ(A)=0$, si $A'\subset A$ entonces $A' \in \algbM$
Es decir, todo subconjunto de un elemento de $\algbM$ de medida 0 se contiene en $\algbM$
\end{defn}

\begin{theorem}
Sea $(X, \algbM, µ)$ un espacio de medida y sea
\[\algbM = \{N \in \algbM: µ(N)=0\}\]

Entonces
\[\overline{\algbM}=\{E \cup F: E \in \algbM, \exists N \in \algbM, F \subset N\}\]

es una $\salgb$ y exsite una única medida $\overline{µ}$ extensión de µ a $\overline{\algbM}$ y se denomina \textbf{compleción de µ}
\end{theorem}
\begin{proof}
Vamos a probar en primer lugar que $\overline{\algbM}$ es una $\salgb$.

$\overline{\algbM}$ está cerrada por uniones numerables, es decir, dada una serie de conjuntos $\{E_n \cup F_n\}\in \overline{\algbM}$, tenemos que:
\[\bigcup_{n=1}^{\infty}(E_n \cup F_n) =\bigcup_{n=1}^{\infty}E_n \cup \bigcup_{n=1}^{\infty} F_n \]
Está claro que la unión de los $E_n$ pertenece a $\algbM$ puesto que es una $\salgb$. Además, si para cada $F_n$ como su $N_n$ correspondiente, tenemos:
\[\bigcup_{n=1}^{\infty}F_n \subset \bigcup_{n=1}^{\infty}N_n \subset \algbM\]

Por tanto, es obvio que:
\[\bigcup_{n=1}^{\infty}(E_n \cup F_n) \subset \overline{\algbM}\]

También se cumple que $\overline{\algbM}$ es cerrada por complementación, es decir, dado $E\cup F \subset \overline{\algbM}$, $(E \cup F)^c\subset \overline{\algbM}$

Es sencillo ver que:
%TODO Pedir a Jorge o Elenea que no recuerdo cómo lo escribió para que fuese super fácil.
Una vez demostrado esto, sólo nos queda definir la extensión $\overline{µ}$. Lo haremos como:
\[\overline{µ}(E \cup F) = µ(E)\]
Ahora debemos ver que está bien definida y es completa. Esto es bastantante obvio, tan obvio que se deja como ejercicio para el lector su comprobación.
\end{proof}

\section{Medida exterior}
Ya habíamos extendido el concepto de longitud de un intervalo a cualquier subconjunto de $\real$ por medio de la medida exterior.

Este proceso puede extenderse de forma abstracta a un subconjunto cualquiera, sin restringirnos a $\real$.

\begin{defn}[Medida exterior]
Sea $X \neq \emptyset$ y sea $\appl{µ^*}{\algbP(X)}{[0, \infty)}$, decimos que $µ^*$ es una medida exterior si cumple las siguientes propiedades:
\begin{enumerate}
\item La medida exterior del vacío es 0.
\[µ^*(\emptyset) = 0\]
\item Si un conjunto se contiene en otro su medida es menor
\[A \subset B \implies µ^*(A) \leq µ^*(B)\]
\item La medida exterior de una unión de conjuntos es menor que la suma de las medida exteriores de cada uno de esos conjuntos.
\[µ^*(\bigcup A_i) \leq \sum µ^*(A_i)\]
\end{enumerate}
\end{defn}

\begin{prop}
Sea $ε \subset \algbP(X)$, una familia de subconjuntos de $X$ que contiene al conjunto vacío y a $X$.

Sea $\appl{\rho}{ε}{[0, \infty)}$ con $\rho(\emptyset)=0$, Entonces la aplicación
\[\appl{µ^*}{\algbP(X)}{[0, \infty)}\]
definida por
\[µ^*(E)= \inf \{\sum_{j=1}^{\infty}\rho(E_j): \ E \subset \bigcup_{j=1}^{\infty}E_j\}\]
es una medida exterior.
\end{prop}
\begin{proof}
Vamos a comprobar que $µ^*$ como la hemos definido es una medida exterior:
\begin{enumerate}
\item Está claro que, por construcción $µ^*$ está definida sobre $\algbP(X)$
\item Es obvio también que $µ^*(\emptyset)=0$
\item Vamos a ver que:
\[A \subset B \implies µ^*(A) \leq µ^*(B)\]
Esto es cierto puesto que:
\[µ^*(A)= \inf \{\sum_{j=1}^{\infty}\rho(E_j): \ A \subset \bigcup_{j=1}^{\infty}E_j\} \leq \inf \{\sum_{j=1}^{\infty}\rho(E_j): \ B \subset \bigcup_{j=1}^{\infty}E_j\}\]
Es decir, al tomar B en lugar de A, estamos contando todos los puntos de A y alguno más por lo que obtendremos una suma mayor o igual. (Estamos sumando números positivos por lo que la suma no puede decrecer sin extraer ningún elemento de la misma).
\item Por último, nos queda comprobar la propiedad:
\[µ^*(\bigcup A_i) \leq \sum µ^*(A_i)\]

Para ello vamos a demostrar que
\[\forall ε > 0 \ µ^*(A) \leq \sum_{j=1}^{\infty}µ^*(A_j)+ε\]
ya que en ese caso, podemos quitar el ε y obtenemos el resultado buscado.

Para cada j
\[\exists \{E_j^k\}\subset \algbP(X), \ A_j \subset \bigcup E_j^k\]

Es claro que:
\[µ^*(A_j) \geq \sum_{k}\rho(E_j^k)-\frac{ε}{2^k}\]
puesto que $µ^*(A_j)$ es el ínfimo de $\sum_{k}\rho(E_j^k)$ y por tanto, se acerca al ínfimo tanto como deseemos.

También es cierto que:
\[A \subset \bigcup_j \bigcup_k E_j^k\]

De donde decuimos que
\[µ^*(A) \leq \sum_j\sum_k \rho(E_j^k) \leq \sum_j(µ^*(A_j)+\frac{ε}{2^j}) = \sum_j µ^*(A_j)+ε\]
\end{enumerate}
\end{proof}

Recordemos que en el primer tema, definimos la medida interior por medio de un fraccionamiento de la medida exterior y nos quedamos con los conjuntos interesantes. Es decir, nos quedamos con aquellos en los que la medida interior y la exterior coincidían.

Bien, pues ahora vamos a hacer algo parecido.
\begin{theorem}[Teorema de Carathéodory]
Este teorema nos va a permitir, a partir de una medida exterior, quedarnos con los conjuntos que funcionan bien con ella y construir una medida sobre ellos.

Sea $X \neq \emptyset$ y sea $µ^*$ una medida exterior en $X$.

Entonces

\[\algbM = \{A \subset X: \ \forall E \subset X \ µ^*(A)=µ^*(E \cap A) + µ^*(E \cap A^c)\}\]
es una $\salgb$ y $µ^*_{|\algbM}$ es una medida completa.
\end{theorem}
\begin{proof}
Vamos a distinguir claramente las dos partes de la demostación:
\begin{itemize}
\item Comprobar que $\algbM$ es una $\salgb$

Para ello vamos a ir viendo que se cumplen una a una las condiciones necesarias para que sea una $\salgb$
\begin{enumerate}
\item Cerrada por complementación.

Esto es bastante obvio ya que la expresión que define $\algbM$ es simétrica para $E$ y $E^c$.

\item Cerrada por uniones finitas.

Para ello partimos de dos elementos $A,B\in \algbM$. Entonces
\[\forall E \in X, \ µ^*(E)=µ^*(E \cap A)+µ^*(E \cap A^c) = \]
\[µ^*(E \cap A\cap B)+µ^*(E \cap A^c \cap B^c)+µ^*(E \cap A \cap B^c)+µ^*(E \cap A^c \cap B)\]

Por otro lado, tenemos que
\[A \cup B = (A\cap B)\cup(A\cap B^c)\cup (A^c \cap B) \implies\]
\[\implies µ^*(E\cap (A\ cup B)) \leq µ^*(E \cap (A \cup B))+µ^*(E \cap (A \cup B^c))+µ^*(E \cap (A^c \cup B))\]

Juntando los dos resultados llegamos a:
\[µ (E) \geq µ^*(E \cap (A \cup B))+µ^*(E \cap (A \cup B)^c)\geq µ^*(E) \implies A \cup B \in \algbM\]


Tenemos que ver, además, que $µ^*$ es finitamente aditiva. Para ello tomamos dos conjuntos $A, B \in \algbM$ tales que $A \cap B = \emptyset$.

Entonces:
\[µ^*(A \cup B) = µ^*((A \cup B) \cap A) + µ^*((A \cup B \cap A^c)= µ^*(A)+µ^*(B)\]

\item Cerrada por uniones numerables, comprobando así que es una $\salgb$.

Para comprobar esto basta con ver que es cerrada por uniones numerables disjuntas ya que, como ya vimos, esto implicaba el cierre para todo tipo de unión numerable.

Para demostrarlo, vamos a considerar la sucesión $\{A_j\}_{j \in \nat} \subset \algbM$ con $A_i\cap A_j = \emptyset$, y definimos $B_n = \bigcup_{j=0}^{n} A_j$.

Con esta notación tenemos que
\[B= \bigcup_{j=0}^{\infty} A_j = \bigcup_{n=0}^{\infty} B_n\]

Tras esto vemos
\[\forall E \subset X, \ µ^*(E \cap B_n) = µ^*(E \cap B_n \cap A_n)+µ^*(E \cap B_n \cap A_n^c) = µ^*(E \cap A_n)+µ^*(E \cap B_n)\]

Por inducción tenemos que:
\[µ^*(E \cap B_n)= \sum_{j=0}^{n}(µ^*(E \cap A_j))\]

Entonces
\[µ^*(E)=µ^*(E \cap B_n) + µ^*(E \cap B_n^c)\]

Ahora podemos combinar las dos últimas igualdades. Además, to que los $B_n$ son una sucesión creciente hacia B, sus complementarios decrecen hacia $B^c$ por lo que podemos escribir:
\[µ^*(E) \geq \sum_{j=0}^{n}(µ^*(E \cap A_j)) +µ^*(E \cap B^c)\]

Pero ya sabemos que la suma de las medidas exteriores es mayor que la medida de la unión y también tenemos que la unión de los conjuntos $E \cap A_j$ cumple:
\[\bigcup_{j=1}^{\infty} E \cap A_j = E \cap B\]
Y llegamos a que:
\[µ^*(E)=µ^*(E \cap B_n) + µ^*(E \cap B_n^c)) \geq µ^*(E \cap B) +µ^*(E \cap B^c) = µ^*(E) \implies B \in \algbM\]

\item Numerablemente aditiva.
Esto puede demostrarse repitiendo los pasos anteriores considerando $E=B$.
Quedaría:
\[µ^*(B)=\sum_{j=0}^{\infty}µ^*(B \cap A_j) = \sum_{j=0}^{\infty} µ^*(A_j)\]
\end{enumerate}
\item Comprobar que $µ^*_{|\algbM}$ es una medida completa

Vemos claramente que si $µ^*(A)=0$ entonces $A \in \algbM$
\[µ^*(E) \leq µ^*(E \cap A) + µ^*(E \cap A^c)\leq µ^*(E)\]
\end{itemize}
\end{proof}

\section{Premedidas}
\begin{defn}[Premedida]
Sea $\algb{A} \subset \algbP(x)$ un álgebra, $\appl{µ_0}{\algb{A}}{[0, \infty]}$ es una promedida si:
\begin{itemize}
\item
\[µ_0(\emptyset)=0\]
\item Si $\{A_j\}_{j \in \nat} \subset \algb{A}, A_i \cap A_j = \emptyset$ y $\bigcup_{j=0}^{\infty}A_j = \algb{A}$ entonces
\[µ_0(\bigcup{j=0}^{\infty}A_j) = \sum_{j=0}^{n}µ_0(A_j)\]
\end{itemize}
\end{defn}

A partir de una promedida $µ_0$ definimos una medida exterior $µ^*$ en $\algbP(X)$ de la forma:
\[µ^*(E) = \inf \{\sum_{j=0}^{\infty} µ_0(A_j), \ A_j \in \algb{A}, \ E \subset \bigcup_{j=0}^{\infty}A_j\}\]

\begin{prop}
Con la notación anterior:
\begin{enumerate}
\item La medida exterior extiende la premedida:
\[µ^*_{|\algb{A}}=µ_0\]
\item Todo elemento del álgebra es $µ^*$-medible.
\[\forall A \in \algb{A}, \ \forall E \subset X: µ^*(E)=µ^*(E \cap A)+µ^*(E \cap A^c)\]
\end{enumerate}
\begin{proof}
Vamos a demostrar la segunda propiedad que es la interesante y la que realmente tiene algo que demostrar.

Vamos a demostrar la igualdad demostrando las desigualdades en ambas direcciones. (un clásico vaya)
\[A \in \algb{A} \text{ como } A \subset A, µ^*(A)\leq µ_0(A)\]

Si $A \subset \bigcup_{j=0}^{\infty}A_j, \ A_j \in \algb{A}$, (sin pérdida de generalidad podemos supones los $A_j$ disjuntos), entonces:
\[A = \bigcup(A \cap A_j)\]
donde cada una de las intersecciones es un elemento del álgebra. Por tanto:
\[µ_0(A) = \sum µ_0(A \cap A_j)\leq \sum µ_0(A_j)\]
Puesto que la premedida de $A$ está por debajo de todas las sumas de la fomra $\sum µ_0(A_j)$, está por debajo del ínfimo de todos esos valores y por tanto está por debajo de la medida exterior.
\end{proof}
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\appendix
\chapter{Ejercicios}

\input{tex/Ejercicios.tex}


\printindex
\end{document}


