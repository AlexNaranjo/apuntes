% -*- root: ../AlgebraConmutativa.tex -*-

\chapter{La dimensión de las variedades algebraicas afines}

Esquema de contenidos del tema:

\begin{itemize}
	\item Definición intuitiva de lo que debería ser la dimensión de una v.a.a.
	\begin{itemize}
		\item Traducción de la noción anterior en términos de lo que vamos a llamar dimensión de Krull de un anillo.
		\item Nos vamos a creer que $\dim_{Krull}\K[x_1,...,x_n]=n$ (dimensión de Krull de un anillo de polinomios con coeficientes en un cuerpo).
	\end{itemize}
	\item Veremos que si tenemos $A \subset B$, una extensión entera de anillos, entonces $ \dim_{Krull} A = \dim_{Krull} B$
	\item Vamos a ver el \textbf{Lema de Normalización de Noether:} Toda v.a.a. X se puede proyectar de manera finita sobre un espacio afín $\Akn$, donde $n=\dim_{Krull}\K[X]$. (siendo $\K[X]$ un anillo de coordenadas) %(Enunciado geométrico)
	\item Y si nos diese tiempo veríamos el teorema que nos dice que $\dim_{Krull}\K[x_1,...,x_n]=n$.
\end{itemize}

\section{Definición intuitiva de lo que debería ser la dimensión de una v.a.a.}

Por ejemplo, si tenemos un espacio vectorial V sobre un cuerpo $\K$, para saber la dimensión de V buscamos una base $B=\{ v_1,...,v_n\}$ que es una serie de vectores linealmente independientes que generan el espacio. 

Cada vez que me dan una base puedo construir una cadena de subespacios vectoriales:
$\{0\} \subsetneqq \gen{v_1} \subsetneqq \gen{v_1,v_2} \subsetneqq ... \subsetneqq \gen{v_1,...,v_n}$. Entonces esta cadena es la más larga dentro de $V$, y la longitud de esta cadena se dice que es n (el primero se considera 0). Por tanto $n= \dim V$

Vamos a usar el mismo razonamiento para calcular la dimensión de $X$ v.a.a.. Vamos a suponer $X$ es irreducible y a considerar dentro de $X$ subvariedades y construir la cadena más larga dentro de $X$. Consideramos dentro de $X$ cadenas estrictamente crecientes de subvariedades irreducibles. Tendríamos:

$$Y_0 \subsetneqq Y_1 \subsetneqq ... \subsetneqq Y_n=X$$

Entonces podríamos definir $\dim X$ como la longitud de la cadena más larga.

Si $X$ no fuese irreducible se separa en variedades irreducibles y se le asigna como dimensión el máximo de las longitudes.

\subsection{Traducción de la noción de dimension en términos del álgebra conmutativa} 

Tenemos $X \subseteq  \Akn$, y tenemos también $\I(X) \subseteq \K[x_1,...,x_n]$

La cadena anterior de ideales irreducibles se traduce en una cadena de ideales  primos (por la proposición \ref{prop:VaaIrreducibleIdPrimo}):

$$\I(Y_0) \supsetneqq \I(Y_1) \supsetneqq ... \supsetneqq \I(Y_n)=\I(X)$$

Pero estas cadenas (que contienen a $\I(X)$) se corresponden biyectivamente con cadenas de ideales primos en $\K[X]=\quot{\K[x_1,...,x_n]}{\I(X)}$ . Así, para definir la dimensión de $X$ miraremos al máximo de las longitudes de las cadenas  de ideales primos en $\K[X]$.

Esto es bastante fuerte ya que vimos que dada una v.a.a. $X$ el anillo de coordenadas es el mismo sea donde sea que viva $X$ (dando igual que la $X$ viva en un espacio afín o en otro). Imaginaos que $X$ es una curva en $A^3$, la misma curva la puedo ver en $A^4$, su anillo de coordenadas es el mismo. \textcolor{red}{Donde hemos visto esto?}

\textcolor{red}{Poner reflexion de anillos de coordenadas unicos para variedades dando igual donde viven}

\begin{defn}
	Sea $A$ un anillo y sea $p_0 \subsetneqq p_1 \subsetneqq ... \subsetneqq p_r$ una cadena estrictamente creciente de ideales primos en $A$. En tal caso, diremos que la longitud de la cadena es $r$, y definimos $\dim_{Krull} A$ como el máximo (si existe) de las longitudes tras considerar todas las posibles cadenas de ideales primos en $A$:
	
	$$ \dim_{Krull}A = \max \left\{ r: \exists \text{ cadena } p_0 \subsetneqq p_1 \subsetneqq ... \subsetneqq p_r \text{ con } p_i \text{ primo } \subset A \right\} $$
\end{defn}

\begin{example}
	Sea $\K$ un cuerpo (su único ideal primo es el $\{0\}$), la cadena más larga que puedo montar es $\{0\}$, por tanto: $\dim_{Krull} \K = 0$
\end{example}

\begin{example}
	Sea $\ent$, los ideales primos en $\ent$ son el $\{0\}$ y los generados por números primos, por tanto las cadenas serán:
	
	$$ \{0\} \subsetneqq \gen{p} $$
	
	Pero $\gen{p}$ es maximal así que ya no puedo hacer la cadena más larga, luego $\dim_{Krull} \ent = 1$
\end{example}

\begin{example}
	Sea $\K[x]$ con $\K$ cuerpo. Construyo la cadena:
	
	$$\{0\} \subsetneqq  \gen{p(x)} $$
	
	Con $p(x)$ irreducible, pero $\gen{p(x)}$ es maximal así que ya no puedo seguir. Luego  $\dim_{Krull} \K[x] = 1$
	
	Además $\K[x]$ es el anillo de coordenadas de $\A^1_K$, que esperamos que tenga dimensión 1.
\end{example}

\begin{example}
	Sea $\K[x,y]$:
	
	$$\{0\} \subsetneqq  \gen{x} \subsetneqq \gen{x,y} $$
	
	Por tanto  $\dim_{Krull} \K[x,y] \geq 2$
\end{example}

	Nos vamos a creer lo siguiente: \textbf{Teorema: Sea $\K$ un cuerpo, entonces $\dim_{Krull} \K[x_1,...,x_n]=n$}
	
	\begin{defn}[Dimension de una v.a.a.]
		Sea $X$ una v.a.a. definimos $\dim X = \dk \K[X]$
	\end{defn}
	
\section{Dimensión de Krull en el caso de extensiones enteras de anillos}

Recordatorio extensiones enteras:

Tenemos $A \hookrightarrow B$ ($A \subset B$) extensión de anillos. Cada elemento de b es raíz de un polinomio mónico de elementos en A.
\begin{itemize}
	\item Si $A \subset B$ es una extensión entera y si $J \subset B$ es un ideal, entonces $\quot{A}{J \cap A} \hookrightarrow \quot{B}{J}$ es entera.
	\item Si $S \subset A$ es una parte multiplicativa (conjunto multiplicativamente cerrado) entonces $S^{-1}A \hookrightarrow S^{-1}B$ es una extensión entera.
	\item Si fijamos un ideal primo $p \subset A$ y tomamos $S=A \setminus p$, entonces $A_p=S^{-1}A$ es un anillo local con maximal $pA_p$
	\item \textbf{Teorema:} Sea $A \subset B$ una extensión entera de dominios de integridad. Entonces $A$ es un cuerpo  $\Leftrightarrow B$ es un cuerpo.
\end{itemize}

\begin{prop}
	Sea $A \subset B$ una extensión entera y sea $q \subset B$ un ideal primo (si tengo un homomorfismo de A a B, $f^{-1}(ideal)=ideal$) entonces $q \cap A$ es maximal $\Leftrightarrow$ q es maximal.
	
\end{prop}

\begin{proof}
	Sea $A \subset B$ entera $\implies \underbrace{\quot{A}{q \cap A}}{\text{D.I}} \subset \underbrace{\quot{B}{q}}{\text{D.I}}$ entera.
	
	Por el teorema anterior $\quot{A}{q \cap A}$ es un cuerpo $\Leftrightarrow$ $\quot{B}{q}$ es un cuerpo. Por lo tanto q es maximal si y solo si $q \cap A$ es maximal.
\end{proof}


Vamos a ver ejemplos para ver que la hipótesis sobre la extensión es necesaria:
\begin{example}
	$\ent \subset \rac$ es algebraica pero no entera. En $\rac$ cogemos el único primo que hay que es el $\{0\}$ que además es maximal. Ahora miramos $\ent \cap \{0\}=\{0\}$ que es un primo no maximal.
\end{example}

\begin{example}
	$\ent \subset \ent[x]$ y cogemos $p=\gen{3}=3 \ent[x] \in \ent[x]$. Este ideal es primo ya que al pasar al cociente me sale $\quot{\ent[x]}{\gen{3}}=F_3[x]$ un dominio de integridad, pero no un cuerpo. Por tanto tengo un primo no maximal.
	
	Ahora hago $\ent \cap 3 \ent[x]=3 \ent$ que es un primo maximal.
\end{example}

\begin{prop}
	Sea $A \subset B$ una extensión entera, y sea $p \subset A$ un ideal primo. Entonces existe un ideal primo $q \subset B$ tal que $q \cap A=p$.
\end{prop}

\begin{proof}
	$A \subset B$. Sea un primo $p \subset A$. Buscamos un primo $q \subset B$.
	
	Definimos la siguiente parte multiplicativa. Sea $S=A \setminus p$ una parte multiplicativa en A y en B.
	
	\begin{tikzcd}
		A \arrow[hookrightarrow]{r}{entera}
		\arrow[rightarrow]{d}{\varphi}
		\arrow[rightarrow]{dr}{f (h)}
		&  B
		\arrow[rightarrow]{d}{g}\\
		S^{-1}A=Ap \arrow[hookrightarrow]{r}{entera} & S^{-1}B
	\end{tikzcd}
	
	$Ap$ es un anillo local. ideal maximal $pA_p$.
	
	De modo que:
	\begin{enumerate}
	 	\item $S^{-1}B$ tiene algún ideal maximal $m \subset S^{-1}B$
	 	\item $m \cap A_p$ es un ideal maximal luego necesariamente $m \cap A_p=pA_p$.
		\item $\varphi^{-1}(pA_p)=p$
		\item $f^{-1}(m)=p$ (usando 2 y 3).
		\item $g^{-1}(m)=q$ es un ideal primo en $B$.
		\item $q \cap A = p$ porque el diagrama es conmutativo. $h^{-1}(m)=f^{-1}(m)$.
	\end{enumerate}
\end{proof}

Vamos a ver ejemplos sobre la necesidad de la hipótesis de que la extensión sea entera.
\begin{example}
	$\ent \subset \rac $. Cojo $\gen{3} \in \ent$ primo, no existe ningún ideal primo $q \subset \rac$ tal que $q \cap \ent = \gen{3}$.
\end{example}

\begin{example}
	Sea $\real[x] \subset \quot{\real[x,y]}{\gen{xy-1}}$. El ideal $\gen{x}$ es un ideal primo en $\real[x,y]$, y no existe ningún ideal primo $q \subset  \quot{\real[x,y]}{\gen{xy-1}}$ tal que $q \cap \real[x]=\gen{x}$.
	
	Para ello nos basta probar que $\nexists$ ningún ideal primo en $ \quot{\real[x,y]}{\gen{xy-1}}$ que contenga a $\gen{\cls{x}}^e$ (extendido de x).
	
	$$ \gen{\cls{x}}^e=\gen{1}$$
	
	\begin{align*}
		H=\{xy-1=0\} & \rightarrow \A^1_K \\
		(a,b) & \rightarrow (a)
	\end{align*}
	
	La fibra sobre $\{0\}$ es vacía.
	
	Luego $\real[x] \subset \quot{\real[x,y]}{\gen{xy-1}}$ no puede ser una extensión entera.
\end{example}

\begin{prop}
	Sea $A \subset B$ una extensión entera. Sea $p \subset A$ un ideal primo. Sean $q_1 \subseteq q_2 \subset B$ dos ideales primos tales que $q_1 \cap A=q_2 \cap A = p$. Entonces $q_1=q_2$.
\end{prop}

\begin{proof}
	Sea $S = A \setminus p$
	
	\begin{tikzcd}
		A \arrow[hookrightarrow]{r}{entera}
		\arrow[rightarrow]{d}{\varphi}
		\arrow[rightarrow]{dr}{f (h)}
		&  B
		\arrow[rightarrow]{d}{g}\\
		S^{-1}A=Ap \arrow[hookrightarrow]{r}{entera} & S^{-1}B
	\end{tikzcd}
	
	\begin{enumerate}
		\item 	Como $S= A \setminus p$ entonces $q_1 \cap S = q_2 \cap S = \emptyset$
		\item Por 1, $q_1S^{-1}B$ es primo y $q_2S^{-1}B$ es primo y $q_1S^{-1}B  \subseteq q_2S^{-1}B$. Ambos pertenece a $S^{-1}B$.
		
		\begin{tikzcd}
			A \arrow[hookrightarrow]{r}{entera}
			\arrow[rightarrow]{d}{\varphi}
			\arrow[rightarrow]{dr}{f (h)}
			&  B
			\arrow[rightarrow]{d}{g}\\
			\underbrace{S^{-1}A=Ap}{pA_p} \arrow[hookrightarrow]{r}{entera} & \underbrace{S^{-1}B}{q_1S^{-1}B  \subseteq q_2S^{-1}B}
		\end{tikzcd}
		\item $q_1S^{-1}B \cap A_p=pA_p=q_2S^{-1}B \cap A_p$
		\item $pA_p$ es maximal $\implies q_1S^{-1}B$ y $q_2S^{-1}B$ son maximales, luego $q_1S^{-1}B = q_2S^{-1}B$.
		
		Tenemos que $q_1=g^{-1}(q_1S^{-1}B)$ y $q_2=g^{-1}(q_2S^{-1}B) \implies q_1 = q_2$ 
	\end{enumerate}
	
	Ejemplo para ver la necesidad de las hipótesis:
	
	\begin{example}
		$\ent \subset \ent[x]$. Cojo $\gen{3} \in \ent$ y $\gen{3} \subsetneqq \gen{3,x} \in \ent[x]$ maximal. 
	\end{example}
	
	\begin{example}
		\begin{align*}
			\real[x] & \hookrightarrow \real[x,y] \\
			\gen{x} & \gen{x} \subseteq \gen{x,y}
		\end{align*}
		
		\begin{align*}
			\A^2 & \rightarrow \A^1 \\
			(a,b)& \rightarrow a
		\end{align*}
		
	\end{example}
	
\end{proof}

\begin{corol}
	Sea $A \subset B$ entera. Entonces $\dk A \geq \dk B$
\end{corol}

\begin{proof}
	Sea $q_0 \subsetneqq q_1 \subsetneqq ... \subsetneqq q_r \subset B$ una cadena de ideales prmos en B. Entonces $q_0\cap A \subsetneqq q_1\cap A \subsetneqq ... \subsetneqq q_r\cap A \subset A$
\end{proof}	

%Clase 25/04/2016

\begin{theorem}[Going-up]
	Sea $q_0 \subsetneqq q_1 \subsetneqq ... \subsetneqq q_q \subsetneqq q_{s+1} \subsetneqq ... \subsetneqq q_n$ una cadena de primos en A, y sea $p_0 \subsetneqq p_2 \subsetneqq ... \subsetneqq p_s$ una cadena de primos en B con $p_i \cap A=q_i $ para $i=0,...,s$. Entonces existen primos $p_{s+1} \subsetneqq ... \subsetneqq p_n$ en $B$ tal que $p_s \subsetneqq p_{s+1}$ y $pj \cap A = q_i$ para $j=s+1,...,n$.
\end{theorem}

\begin{proof}
	Podemos suponer que entonces estamos en el caso siguiente:
	\begin{itemize}
		\item $q_0 \subsetneqq q_1$ primos en A.
		\item $p_0$ primo en B. Y se que $p_0 \cap A=q_0$
	\end{itemize}
	
	¿Cómo encontramos $p_1 \subset B$ primo tal que $p_1 \cap A=q_1$ y tal que $p_1 \supsetneqq p_0$?
	
	\begin{tikzcd}
		A \arrow[hookrightarrow]{}{entera}
		\arrow[rightarrow]{d}{\pi}
		\arrow[rightarrow]{dr}{f}
		&  B
		\arrow[rightarrow]{d}{g}\\
		\quot{A}{p_0 \cap B} \arrow[hookrightarrow]{r}{entera} & \quot{B}{p_0}
	\end{tikzcd}
	
	$P_0 \cap B = q_0$. Primo $\cls{q_1}=\quot{q_1}{q_0}$.
	
	Observamos que:
	\begin{enumerate}
		\item $\cls{q_1}=\quot{q_1}{q_0}$ es primo en $\quot{A}{q_0}$
		\item Como $\quot{A}{q_0} \hookrightarrow \quot{A}{p_0}$ es entera, entocnes existe $\cls{p_1} \subset \quot{B}{p_0}$ tal que $\cls{p_1} \cap \quot{A}{q_0}=\cls{q_1}$. 
		\item $f^{-1}(\cls{p_1})=q_1$
		\item $\cls{p_1}$ esta en correspondencia biyectiva con un único primo $p_1 \subset B$ que contiene a $p_0$. $\pi{-1}(\cls{p_1})=p_1$, $p_1 \supseteqq p_0$.
		\item $p_1 \cap A=q_1$ porque el diagrama conmuta.
	\end{enumerate}
\end{proof}

\obs 		
$A \hookrightarrow B$ extensión entera y sea $J \subsetneqq B$ un ideal. Afirmación:

\begin{proof}
$$\quot{A}{J \cap A} \hookrightarrow \quot{B}{J}$$

Es una extension entera porque:

Es inyectiva:

$$ A \hookrightarrow B \rightarrow \quot{B}{J}$$ y la composición g es un homomorfismo. Ahora tenemos:

$$\quot{A}{\ker g} \hookrightarrow \quot{B}{J}$$

Luego $\ker A=A \cap J$. Ahora vamos a ver que:

$$ \quot{A}{J \cap A} \hookrightarrow \quot{B}{J}$$ es una extensión entera.

Sea $\cls{b} \in \quot{B}{J}$, existe $q(x) \in \quot{A}{J \cap A}[x]$ mónico tal que $q(\cls{b})=0$.

\begin{tikzcd}
	A \arrow[hookrightarrow]{}{entera}
	\arrow[rightarrow]{d}{\pi}
	\arrow[rightarrow]{dr}{f}
	&  B
	\arrow[rightarrow]{d}{g}\\
	\quot{A}{J \cap A} \arrow[hookrightarrow]{r}{entera} & \quot{B}{J }
\end{tikzcd}

Sea $b \in B$ un elemnto tal que $b \equiv \cls{b} mod J$. Como b es entero sobre A entonces existe $p(x) \in A[x]$ mónico tal que $p(b)=0$.

$p(x) = a_0+a_1x+...+a_{n-1}x^{n-1}+x^n$ con $a_1 \in A$. Luego $p(b) = a_0+a_1b+...+a_{n-1}b^{n-1}+b^n=0$ en B. Entonces: $a_0+a_1b+...+a_{n-1}b^{n-1}+b^n=\cls{0}$ en $\quot{B}{J}$ y por tanto $\cls{a_0}+\cls{a_1}\cls{b}+...+\cls{a_{n-1}}\cls{b^{n-1}}+\cls{b}^n=\cls{0}$  en $\quot{B}{J}$. $\cls{a_i} \in \quot{A}{J \cap A}$ basta tomar $q(x)=\cls{a_0}+\cls{a_1}x+...+\cls{a_{n-1}}x^{n-1}+x^n=\cls{0}$
\end{proof}

\begin{corol}
	Si $A \subset B$ es entera entonces $\dk B \geq \dk A$
\end{corol}

\textbf{conclusion} Si $A \subset B$ es entera entonces:
$$ \dk A = \dk B $$

\begin{example}
	Sea $\real \subset \quot{\real[x]}{\gen{x(x^2-1)}}$ entonces es como añadirle $\cls{x}$.
	
	$\cls{x}$ es entero sbre $\real$ porque es raíz de $p(T)=T^3-T \in \real[T]$ Como $\cls{x}$ es entero sobre $\real$ entonces $\real \hookrightarrow \quot{\real[x]}{\gen{x^3-x}}$ es finita, por tanto es entera.
	
	\textcolor{red}{incluir duda del tio del primera fila}
	
	$$ \dk \quot{\real[x]}{\gen{x^3-x}} = 0$$
	
	Toda cadena de primos en $\quot{\real[x]}{\gen{x^3-x}}$ tiene longitud 0. Luego en $\quot{\real[x]}{\gen{x^3-x}}$ todos los primos son maximales y minimales. ¿Cuántos puede haber?. Sólo puede haber un número finito de primos porque es un anillo noetheriano (cociente de noetheriano es noetheriano, y en su día dijimos que en un anillo noetheriano sólo hay un número finito de primos minimales)
	
	Cuáles son los primos de $\quot{\real[x]}{\gen{x^3-x}}$, pues estan en correspondencia biyectiva con los de $\real[x]$ que contienen a $\gen{x^3-x}$,, osea que sólo son $\gen{\cls{x}}$, $\gen{\cls{x-1}}$, $\gen{\cls{x+1}}$.
\end{example}

 
\subsection{Interpretación geométrica}

\begin{defn}
	Sean $X,Y$ v.a.a. y sea $\varphi: X \rightarrow Y$ un morfismo. Diremos que $\varphi$ es un morfismo finito si $\varphi^*: \K[Y] \hookrightarrow \K[X]$ es una extensión finita (y por tanto entera).
\end{defn}

\begin{example}
	Sea $|\K|=\infty$, y sea;
	\begin{align*}
		\varphi: P=\{x_2 2-x_1=0 \}& \rightarrow \A^1 \\
		(a,b) & \rightarrow a
	\end{align*}
	 
	 entonces es finita.
	 
	 Porque:
	 \begin{align*}
	 	\varphi^*: \K[y_1]& \rightarrow \quot{K[x_1,x_2]}{\gen{x_2^2-x_1}} \\
	 	y_1 & \rightarrow \cls{x_1}
	 \end{align*}
	 
\end{example}