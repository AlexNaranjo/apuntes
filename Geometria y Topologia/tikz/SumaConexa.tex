\begin{tikzpicture}[scale = 1]

%% Manifold 1
\begin{scope}

% Main shape
\begin{scope}
\path[draw, clip]
	(0.1,0) .. controls (0.1, 0.8) and (1,0.75) ..
	(1, 0.75) .. controls (1.3, 0.75) and (1.7, 0.5) ..
	(2, 0.5) .. controls (2.3, 0.5) and (2.7, 0.7) ..
	(3, 0.7) .. controls (3.4, 0.7) and (3.5, 0.5) ..
		node [pos = 0.8, inner sep = 0pt, outer sep = 0pt] (N1U) {}
	(5, 0.5) to [bend right]
	(5, -0.5) .. controls (3.5, -0.5) and (3.4, -0.7) ..
		node [pos = 0.2, inner sep = 0pt, outer sep = 0pt] (N1L) {}
	(3, -0.7) .. controls (2.7, -0.7) and (2.3, -0.5) ..
	(2, -0.5) .. controls (1.7, -0.5) and (1.3, -0.75) ..
	(1, -0.75) .. controls (1, -0.75) and (0.1, -0.8) ..
	(0.1,0);

\shade[top color = green!10!white, bottom color = green!70!black, opacity = 0.4] (0, -1) rectangle (5.2, 1);
\end{scope}

% Removed shape
\begin{scope}
\clip
	(5, 0.5) .. controls (5.2,0.5) and (5.8,0.3) ..
	(5.8,0) .. controls (5.8,-0.3) and (5.2,-0.5) ..
	(5, -0.5) to[bend left] (5, 0.5);

\draw[dashed, gray]
	(5, 0.5) .. controls (5.2,0.5) and (5.8,0.3) ..
	(5.8,0) .. controls (5.8,-0.3) and (5.2,-0.5) ..
	(5, -0.5) to[bend left] (5, 0.5);

\shade[top color = green!10!white, bottom color = green!70!black, opacity = 0.2]
	(4.5, -0.5) rectangle (6, 0.5);
\end{scope}

\node[nodepoint, green!80!black,label = {right:\textcolor{green!70!black}{$p$}}]
	(P) at (5.8, 0) {};

\draw[thick, green!80!black] (5, -0.5) to [bend left]
	node [black, pos = 0.7, nodepoint, label = {left:\textcolor{black}{$R$}}] (R) {}
	(5,0.5);
\draw[thick, green!80!black, dashed] (5, -0.5) to [bend right] (5,0.5);

\draw[shorten <= -0.06cm, shorten >= -0.06cm] (0.7, 0) to [bend right] (1.3, 0);
\draw[fill = white] (0.7, 0) to [bend right] (1.3, 0) to [bend right] (0.7, 0);


\draw[shorten <= -0.06cm, shorten >= -0.06cm] (2.7, 0) to [bend right = 20] (3.3, 0);
\draw[fill = white] (2.7, 0) to [bend right = 20] (3.3, 0) to [bend right = 20] (2.7, 0);

\coordinate (C1) at (5.2, -0.55);
\end{scope}

%% Manifold 2
\begin{scope}[xshift = 9cm]
\begin{scope}
\path[draw, clip]
	(0, 0.5) to[bend left]
	(0, -0.5) .. controls (1, -0.5) and (1.8, -1) ..
		node[pos = 0.2, inner sep = 0pt, outer sep = 0pt] (N2L) {}
	(3, -1) .. controls (4, -1) and (4.5, -0.5) ..
	(4.5,0) .. controls (4.5, 0.5) and (4, 1) ..
	(3, 1) .. controls (1.8, 1) and (1, 0.5) ..
		node[pos = 0.8, inner sep = 0pt, outer sep = 0pt] (N2U) {}
	(0, 0.5);

\shade[top color = orange!10!white, bottom color = orange!70!black, opacity = 0.4]
	(0,-1) rectangle (4.5, 1);
\end{scope}

% Removed part
\begin{scope}
\clip
	(0, 0.5) .. controls (-0.4,0.5) and (-0.8, 0.3) ..
	(-0.8,0) .. controls (-0.8,-0.3) and (-0.4,-0.5) ..
	(0, -0.5) to[bend right] (0, 0.5);

\draw[dashed, gray]
	(0, 0.5) .. controls (-0.4,0.5) and (-0.8,0.3) ..
	(-0.8,0) .. controls (-0.8,-0.3) and (-0.4,-0.5) ..
	(0, -0.5) to[bend right] (0, 0.5);

\shade[top color = orange!10!white, bottom color = orange!70!black, opacity = 0.2]
	(-0.8, -0.5) rectangle (0.5, 0.5);
\end{scope}


\node[nodepoint, orange,label = {left:\textcolor{orange}{$q$}}]
	(Q) at (-0.8, 0) {};

\draw[orange!40!black, thick] (0, -0.5) to[bend right] (0, 0.5);
\draw[orange!40!black, thick, dashed] (0, 0.5) to[bend right] (0, -0.5);

\draw[shorten <= -0.1cm, shorten >= -0.1cm] (2.2, 0) to [bend right] (3.7, 0);
\draw[fill = white] (2.2, 0) to [bend right] (3.7, 0) to[bend right] (2.2, 0);

\coordinate (C2) at (-0.2, -0.55);
\end{scope}

\begin{scope}[xshift = 10.5cm, yshift = -3.5cm]
\coordinate (I2V) at (-0.7, 0.7);
\coordinate (I2H) at (-1.3, 0);
\draw[->] (-1.2, 0) -- (1.2, 0);
\draw[->] (0, -1.2) -- (0, 1.2);

\draw[orange!40!black, thick] (0,0) circle [radius = 0.7cm];
\draw[orange, thick] (0,0) circle [radius = 1cm];

\shade[top color = orange!10!white, bottom color = orange!70!black, opacity = 0.2] (0,0) circle[radius = 1cm];

\node[nodepoint] (RI2) at (0.7, 0.7) {};

\node (RI2L) at (1.4, 1.4) {$\alpha(\varphi_1(R))$};
\draw[shorten <= 0.05cm, ->] (RI2) to[bend right] (RI2L);
\end{scope}


\begin{scope}[xshift = 3.5cm, yshift = -3.5cm]
\coordinate (I1V) at (0.7, 0.7);
\coordinate (I1H) at (1.3, 0);
\draw[->] (-1.2, 0) -- (1.2, 0);
\draw[->] (0, -1.2) -- (0, 1.2);

\draw[green!80!black, thick] (0,0) circle [radius = 0.7cm];
\draw[green!40!black, thick] (0,0) circle [radius = 1cm];

\shade[top color = green!10!white, bottom color = green!70!black, opacity = 0.2] (0,0) circle[radius = 1cm];

\node[nodepoint] (RI1) at (-0.5, 0.5) {};

\node (RI1L) at (-1.2, 1.2) {$\varphi_1(R)$};
\draw[shorten <= 0.05cm, ->] (RI1) to[bend left] (RI1L);
\end{scope}

\draw[->, green!80!black] (C1) -- node[midway, right] {$\varphi_1$} (I1V);
\draw[->, orange] (C2) -- node[midway, left] {$\varphi_2$} (I2V);

\draw[->, thick] (I1H) -- node[midway, above] {$\alpha$} (I2H);


\draw[orange, thick] (N2L) to[bend right]
	node[pos = 0.8, nodepoint] (IR) {}
	(N2U);
\draw[green!40!black, thick] (N1L) to[bend left] (N1U);

\node at (10.5, 1.5) (IRL) {$\varphi_2^{-1}(Î±(\varphi_1(R)))$};

\draw[->, shorten <= 0.1cm] (IR) to[bend right] (IRL);
\end{tikzpicture}
